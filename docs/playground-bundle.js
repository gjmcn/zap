(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){var n=e[i][1][r];return o(n||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";var e,t=(e=require("source-map"))&&"object"==typeof e&&"default"in e?e.default:e;const r={wordLiterals:new Set(["true","false","null","undefined","Infinity","NaN"]),commands:new Set(["$new","$await","$void","$delete","$typeof","$in","$instanceof","$yield","$yieldFrom","$pick","$insert","$insertEach","$into","$encode","$encodeSVG","$create","$createSVG","$fragment","$attr","$prop","$style","$text","$html","$remove","$lower","$raise","$addClass","$removeClass","$hasClass","$hasAttr","$removeAttr","$removeStyle","$on","$off","$sketch","$a","$abbr","$address","$area","$article","$aside","$audio","$b","$bdi","$bdo","$blockquote","$br","$button","$canvas","$caption","$cite","$code","$col","$colgroup","$datalist","$dd","$del","$details","$dfn","$dialog","$div","$dl","$dt","$em","$embed","$fieldset","$figcaption","$figure","$footer","$form","$h1","$h2","$h3","$h4","$h5","$h6","$header","$hgroup","$hr","$i","$iframe","$img","$input","$ins","$kbd","$label","$legend","$li","$link","$main","$mark","$menu","$meta","$meter","$nav","$noscript","$ol","$optgroup","$option","$output","$p","$picture","$pre","$progress","$q","$rb","$rp","$rt","$rtc","$ruby","$s","$samp","$script","$section","$select","$slot","$small","$source","$span","$strong","$sub","$summary","$sup","$table","$tbody","$td","$template","$textarea","$tfoot","$th","$thead","$time","$title","$tr","$track","$u","$ul","$var","$video","$wbr","$animate","$animateMotion","$animateTransform","$circle","$clipPath","$defs","$desc","$discard","$ellipse","$feBlend","$feColorMatrix","$feComponentTransfer","$feComposite","$feConvolveMatrix","$feDiffuseLighting","$feDisplacementMap","$feDistantLight","$feDropShadow","$feFlood","$feFuncA","$feFuncB","$feFuncG","$feFuncR","$feGaussianBlur","$feImage","$feMerge","$feMergeNode","$feMorphology","$feOffset","$fePointLight","$feSpecularLighting","$feSpotLight","$feTile","$feTurbulence","$foreignObject","$g","$hatch","$hatchpath","$image","$line","$linearGradient","$marker","$mask","$metadata","$mpath","$path","$pattern","$polygon","$polyline","$radialGradient","$rect","$solidcolor","$stop","$svg","$symbol","$textPath","$tspan","$use","$view","$abs","$acos","$acosh","$asin","$asinh","$atan","$atanh","$cbrt","$ceil","$clz32","$cos","$cosh","$exp","$expm1","$floor","$fround","$log","$log10","$log1p","$log2","$round","$sign","$sin","$sinh","$sqrt","$tan","$tanh","$trunc","$toUpperCase","$toLowerCase","$trim","$trimEnd","$trimStart","$neg","$boolean","$number","$string","$date","$isInteger","$isFinite","$isNaN","$not","$random","$randomInt","$categorical","$normal","$logNormal","$binomial","$exponential","$geometric","$array","$get","$set","$if","$each","$awaitEach","$nestEach","$zipEach","$map","$awaitMap","$nestMap","$zipMap","$do","$asyncDo","$while","$asyncWhile","$nest","$zip","$seq","$throw","$try","$awaitTry","$debugger","$print","$reduce","$some","$every","$filter","$min","$minIndex","$max","$maxIndex","$sum","$sumCumu","$count","$find","$findIndex","$order","$orderIndex","$mean","$group","$groupCount","$bin","$binCount","$variance","$deviation","$arrObj","$objArr","$transpose","$class","$extends","$assign","$shuffle","$export","$import","$importAs","$importDefault","$importAll","$ms","$at","$to"]),invalid:new Set(["new","await","void","delete","typeof","in","instanceof","yield","if","do","while","throw","try","debugger","break","catch","class","const","continue","default","else","export","extends","finally","for","function","let","return","switch","var","with","enum","implements","interface","package","private","protected","public","static","_z_"])};r.nonCommands=new Set([...r.wordLiterals,...r.invalid]);const s=new Map([["space",/[^\S\r\n]+/y],["comment",/\/\/.*/y],["newline",/\r?\n/y],["number",/0[bB][01]+n?|0[oO][0-7]+n?|0[xX][\da-fA-F]+n?|0n|[1-9]\d*n|(?:\.\d+|\d+(?:\.\d*)?)(?:e[+\-]?\d+)?/y],["string",/'[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"/y],["regexp",/&\/(?!\/)[^\/\\]*(?:\\.[^\/\\]*)*\/[\w$]*/y],["identifier",/[a-zA-Z_$][\w$]*/y],["openParentheses",/\(/y],["function",/[[{](?:\*\*)?/y],["closeBracket",/[)\]}]/y],["closeSubexpr",/;/y],["spreadOrRest",/\.{3}/y],["arrow",/[\-=]>/y],["operator",/(`)?([+\-*/%\^?\\=]?[=:]|[@#<>!]=|[+\-*/%\^\\!~]|[|<]?\||<\\|&&|<>?|><|>{1,3}|@{1,2}|#{1,2}|\?[?|]?|::)(`)?(?![+\-*%<>=!?\\#@:\|~\^`]|\/(?:$|[^/])|&&)/y]]);const n=new Set(["number","string","regexp","identifier","openParentheses","function"]),a=new Set(["string","identifier","openParentheses"]);const o=new Map;o.set("$get",[3,3]),o.set("$set",[3,3]),o.set("$zip",[1,1/0]),o.set("$seq",[3,3]),o.set("$reduce",[3,3]),o.set("$group",[2,3]),o.set("$groupCount",[2,3]),o.set("$bin",[2,4]),o.set("$binCount",[2,4]),o.set("$sumCumu",[1,2]),o.set("$sum",[1,2]),o.set("$mean",[1,2]),o.set("$minIndex",[1,2]),o.set("$maxIndex",[1,2]),o.set("$min",[1,2]),o.set("$max",[1,2]),o.set("$variance",[1,2]),o.set("$deviation",[1,2]),o.set("$orderIndex",[1,2]),o.set("$order",[1,2]),o.set("$some",[2,2]),o.set("$every",[2,2]),o.set("$filter",[2,2]),o.set("$count",[2,2]),o.set("$findIndex",[2,2]),o.set("$find",[2,2]),o.set("$print",[1,1]),o.set("$arrObj",[1,2]),o.set("$objArr",[1,2]),o.set("$transpose",[1,1]),o.set("$random",[0,3]),o.set("$randomInt",[0,3]),o.set("$categorical",[1,2]),o.set("$normal",[0,3]),o.set("$logNormal",[0,3]),o.set("$binomial",[1,3]),o.set("$exponential",[1,2]),o.set("$geometric",[0,2]),o.set("$shuffle",[1,1]),o.set("$ms",[1,1]),o.set("$insert",[2,3]),o.set("$insertEach",[2,3]),o.set("$into",[2,3]),o.set("$encode",[2,3]),o.set("$encodeSVG",[2,3]),o.set("$create",[1,2]),o.set("$createSVG",[1,2]),o.set("$attr",[2,3]),o.set("$prop",[2,3]),o.set("$style",[2,3]),o.set("$text",[1,2]),o.set("$html",[1,2]),o.set("$remove",[1,1]),o.set("$lower",[1,1]),o.set("$raise",[1,1]),o.set("$addClass",[2,2]),o.set("$removeClass",[2,2]),o.set("$hasClass",[2,2]),o.set("$hasAttr",[2,2]),o.set("$removeAttr",[2,2]),o.set("$removeStyle",[2,2]),o.set("$on",[3,4]),o.set("$off",[3,4]),o.set("$sketch",[0,1]),o.set("$abs",[1,1]),o.set("$acos",[1,1]),o.set("$acosh",[1,1]),o.set("$asin",[1,1]),o.set("$asinh",[1,1]),o.set("$atan",[1,1]),o.set("$atanh",[1,1]),o.set("$cbrt",[1,1]),o.set("$ceil",[1,1]),o.set("$clz32",[1,1]),o.set("$cos",[1,1]),o.set("$cosh",[1,1]),o.set("$exp",[1,1]),o.set("$expm1",[1,1]),o.set("$floor",[1,1]),o.set("$fround",[1,1]),o.set("$log",[1,1]),o.set("$log10",[1,1]),o.set("$log1p",[1,1]),o.set("$log2",[1,1]),o.set("$round",[1,1]),o.set("$sign",[1,1]),o.set("$sin",[1,1]),o.set("$sinh",[1,1]),o.set("$sqrt",[1,1]),o.set("$tan",[1,1]),o.set("$tanh",[1,1]),o.set("$trunc",[1,1]),o.set("$toUpperCase",[1,1]),o.set("$toLowerCase",[1,1]),o.set("$trim",[1,1]),o.set("$trimEnd",[1,1]),o.set("$trimStart",[1,1]),o.set("$neg",[1,1]),o.set("$boolean",[1,1]),o.set("$number",[1,1]),o.set("$string",[1,1]),o.set("$date",[1,1]),o.set("$isInteger",[1,1]),o.set("$isFinite",[1,1]),o.set("$isNaN",[1,1]),o.set("$not",[1,1]),["$a","$abbr","$address","$area","$article","$aside","$audio","$b","$bdi","$bdo","$blockquote","$br","$button","$canvas","$caption","$cite","$code","$col","$colgroup","$datalist","$dd","$del","$details","$dfn","$dialog","$div","$dl","$dt","$em","$embed","$fieldset","$figcaption","$figure","$footer","$form","$h1","$h2","$h3","$h4","$h5","$h6","$header","$hgroup","$hr","$i","$iframe","$img","$input","$ins","$kbd","$label","$legend","$li","$link","$main","$mark","$menu","$meta","$meter","$nav","$noscript","$ol","$optgroup","$option","$output","$p","$picture","$pre","$progress","$q","$rb","$rp","$rt","$rtc","$ruby","$s","$samp","$script","$section","$select","$slot","$small","$source","$span","$strong","$sub","$summary","$sup","$table","$tbody","$td","$template","$textarea","$tfoot","$th","$thead","$time","$title","$tr","$track","$u","$ul","$var","$video","$wbr"].forEach(e=>o.set(e,[0,1])),["$animate","$animateMotion","$animateTransform","$circle","$clipPath","$defs","$desc","$discard","$ellipse","$feBlend","$feColorMatrix","$feComponentTransfer","$feComposite","$feConvolveMatrix","$feDiffuseLighting","$feDisplacementMap","$feDistantLight","$feDropShadow","$feFlood","$feFuncA","$feFuncB","$feFuncG","$feFuncR","$feGaussianBlur","$feImage","$feMerge","$feMergeNode","$feMorphology","$feOffset","$fePointLight","$feSpecularLighting","$feSpotLight","$feTile","$feTurbulence","$foreignObject","$g","$hatch","$hatchpath","$image","$line","$linearGradient","$marker","$mask","$metadata","$mpath","$path","$pattern","$polygon","$polyline","$radialGradient","$rect","$solidcolor","$stop","$svg","$symbol","$textPath","$tspan","$use","$view"].forEach(e=>o.set(e,[0,1]));const{wordLiterals:i,commands:$,invalid:l,nonCommands:u}=r,c=new Set(["+","-","*","/","%","^","&&","||","??","<>","><"]),h=new Set(["<","<=",">",">=","==","!="]),f=new Set(["#","##",":","?:","+:","-:","*:","/:","%:","^:","\\:"]);function p(e){return`Zap syntax at ${e.line}:${e.column+1}, operator ${e.value}, `}function d(e){return Error(`${p(e)}invalid number of operands`)}function _(e,t,r){return Error(`${p(e)}operand ${t+1} of ${r} is invalid`)}function m(e){return Error(`${p(e)}invalid spread syntax`)}function g(e){return Error(`${p(e)}no right operand`)}function w(e){return Error(`${p(e)}cannot be used inside functions or parentheses`)}var y=(e,t)=>{const{operator:r,position:s}=e,n=e.operands,a=r.value,y=n.map(e=>Array.isArray(e)?null:e.type),U=n.length;let b,v,S,x;"|"===a||"<|"===a||"?|"===a?b=!0:"\\"===a||"<\\"===a?v=!0:$.has(a)?S=!0:x=!0;for(let e=0;e<U;e++){if((y[e]?n[e].spread:n[e]._zap_parenthSpread)&&(S&&("$new"!==a||0===e)||v&&(e===s||"<\\"===a&&e===(0===s?1:0))||b&&(e===s||e===(0===s?1:0))||x&&"@"!==a&&"@@"!==a))throw m(r);if("identifier"===y[e]&&l.has(n[e].name)&&(!b||e!==s)&&(!x||!f.has(a)))throw _(r,e,U)}function M(e){return"identifier"===y[e]&&!n[e].unaryMinus}function k(e){return"string"===y[e]&&!n[e].unaryMinus}function j(e){return"number"===y[e]&&!n[e].unaryMinus}function C(e){return M(e)&&!u.has(n[e])}function A(e){if(!k(e))throw _(r,e,U);return n[e].js}function E(e){return{js:e,line:r.line,column:r.column}}function I(e,t,r){if(e.length){for(let r of e)t.push(r,",");r?t[t.length-1]=")":t.pop()}else r&&t.push(")");return t}function N(e){return t.add(e),I(n,[E(`_z_.${e}(`)],"close")}if(x){if(r.preTick||r.postTick){if(2!==U)throw d(r);let e,t,s;return"^"===a?e="**":"=="===a||"!="===a?e=a+"=":"<>"===a?t="<":"><"===a?t=">":e=a,r.preTick&&r.postTick?(s="((u, v) => {v = v[Symbol.iterator](); let r = [], t; for (let s of u) {if ((t = v.next()).done) break; r.push(",s+=t?`t.value ${t} s ? t.value : s`:`s ${e} t.value`,s+=")}; return r})("):s=`((u, v) => {let r = []; for (let s of ${r.preTick?`u) r.push(${t?`v ${t} s ? v : s`:`s ${e} v`})`:`v) r.push(${t?`s ${t} u ? s : u`:`u ${e} s`})`}; return r})(`,I(n,[E(s)],"close")}if(c.has(a)){if(U<2)throw d(r);let e,t,s;if("<>"===a?e="<":"><"===a?e=">":t=r.js="^"===a?"**":a,e)s=[E(2===U?`((x, y) => y ${e} x ? y : x)(`:`((...x) => {let r = x[0], j; for (j = 1; j < ${U}; j++) if (x[j] ${e} r) r = x[j]; return r})(`)],I(n,s,"close");else{s=["(",n[0],r,n[1],")"];for(let e=2;e<U;e++)s.unshift("("),s.push(E(t),n[e],")")}return s}if(h.has(a)){if(2!==U)throw d(r);return r.js="=="===a||"!="===a?a+"=":a,["(",n[0],r,n[1],")"]}if("!"===a){if(1!==U)throw d(r);return r.js="!",["(",r,n[0],")"]}if("?"===a){if(U<2||U>3)throw d(r);return["(",n[0],E("?"),n[1],E(":"),3===U?n[2]:"void 0",")"]}if("@"===a||"@@"===a){const e=[E("[")];return I(n,e).push(E("]")),"@@"===a&&(e.unshift(E("(new Set(")),e.push("))")),e}if("::"===a){if(2!==U)throw d(r);if(s>=U)throw g(r);const e=0===s?1:0;if("identifier"!==y[s]||n[s].unaryMinus||i.has(n[s].name))throw _(r,s,U);return[E(`((o, v) => {o.${n[s].name} = v; return o})(`),n[e],",",n[s],")"]}if(">>"===a){if(U<2||U>3)throw d(r);return N("range")}if(">>>"===a){if(3!==U)throw d(r);return N("rangeN")}if(f.has(a)){function L(e){if("identifier"===y[e]&&l.has(n[e].name))throw _(r,e,U)}if(":"===a.slice(-1)){if(s>=U)throw g(r);const e=0===s?1:0;if(L(e),2===U){if(":"!==a&&"?:"!==a&&"\\:"!==a)throw d(r);const t="?:"===a?"?.":"\\:"===a?'["prototype"]':"";return M(s)?[n[e],E(`${t}["`),n[s],'"]']:[n[e],E(`${t}[`),n[s],"]"]}{if(3!==U)throw d(r);const t=2===s?1:2;let o;":"===a||"\\:"===a?o="=":"?:"!==a&&(o="^:"===a?"**=":a[0]+"=");let i="((o, p, v) => {";i+="?:"===a?"if (o[p] === void 0 || o[p] === null) o[p] = v; ":`o${"\\:"===a?".prototype":""}[p] ${o} v; `,i+="return o})(";const $=[E(i),n[e]];return M(s)?$.push(',"',n[s],'",'):$.push(",",n[s],","),L(t),$.push(n[t],")"),$}}if("#"===a){if(U%2)throw d(r);const e=[E("({")];for(let t=0;t<U;t+=2)L(t+1),M(t)?e.push('"',n[t],'"'):k(t)||j(t)?e.push(n[t]):e.push("[",n[t],"]"),e.push(":",n[t+1],",");return e.push(E("})")),e}{if(U%2)throw d(r);const e=[E("(new Map([")];for(let t=0;t<U;t+=2)L(t+1),e.push("["),M(t)&&!i.has(n[t].name)?e.push('"',n[t],'"'):e.push(n[t]),e.push(",",n[t+1],"],");return e.push(E("]))")),e}}}else if(v||b){if(s>=U)throw g(r);const e=n.slice(0,s).concat(n.slice(s+1));if(v){let t;if("\\"===a)t=[n[s],"("];else{if(1===U)throw d(r);t=[E("((f, ...a) => {f(...a); return a[0]})("),n[s],","]}return I(e,t,"close")}if(b){if(U<2)throw d(r);let t,o;if(t="identifier"!==y[s]||n[s].unaryMinus?[n[s]]:['"',n[s],'"'],"|"===a||"?|"===a)o=[e[0],E("["),...t,E("?|"===a?"]?.(":"](")];else{const r=e.length>1?"...a":"";o=[E(`((o, m${r?`, ${r}`:""}) => {o[m](${r}); return o})(`),e[0],",",...t],r&&o.push(",")}return I(e.slice(1),o,"close")}}else{if(o.has(a)){const[e,t]=o.get(a);if(U<e||U>t)throw d(r);return N(a)}if("$at"===a){if(U<2)throw d(r);const e=[n[0]];for(let t=1;t<U;t++)e.push(E("["),n[t],"]");return e}if("$to"===a){if(U<3)throw d(r);const e=["(",n[0]];for(let t=1;t<U-1;t++)e.push(E("["),n[t],"]");return e.push(E("="),n[U-1],")"),e}if("$new"===a){if(0===U)throw d(r);const e=[E("(new ("),n[0],E(")(")];return I(n.slice(1),e),e.push("))"),e}if("$in"===a||"$instanceof"===a){if(2!==U)throw d(r);return r.js=a.slice(1),["(",n[0]," ",r," ",n[1],")"]}if("$delete"===a){if(U<2)throw d(r);r.js="delete";const e=["(",r," ",n[0]];for(let t=1;t<U;t++)e.push("[",n[t],"]");return e.push(")"),e}if("$await"===a||"$void"===a||"$typeof"===a||"$yield"===a||"$yieldFrom"===a){if(1!==U)throw d(r);return r.js="$yieldFrom"===a?"yield*":a.slice(1),["(",r," ",n[0],")"]}if("$if"===a){if(U%2||U<2)throw d(r);const e=["("];for(let t=0;t<U;t+=2)e.push(n[t],E("?"),n[t+1],E(":"));return e.push("void 0)"),e}if("$array"===a){let e=[E("[")];for(let t of n)e.push(E("..."),t,",");return e.push(E("]")),e}if("$each"===a||"$awaitEach"===a||"$map"===a||"$awaitMap"===a){const e="await"===a.slice(1,6),t="map"===a.slice(-3).toLowerCase();let s=e?"(await (async (i, f) => {let j = 0":"((i, f) => {let j = 0";t&&(s+=", r = []"),s+=`; for ${e?"await ":""}(let v of i) `,t&&(s+="r[j] = "),e&&(s+="await "),s+=`f(v, j++, i); return ${t?"r":"i"}})(`;const o=[E(s)];if(1===U)o.push(E("(function*() {while(1) yield})(),"),n[0],e?"))":")");else{if(2!==U)throw d(r);I(n,o,"close"),e&&o.push(")")}return o}if("$zipEach"===a||"$zipMap"===a){if(U<2)throw d(r);const e=[E(`_z_.${a}(`),n[U-1],","];return t.add(a),I(n.slice(0,-1),e,"close")}if("$nestEach"===a||"$nestMap"===a){if(U<2)throw d(r);const e=n.slice(0,-1),t=e.length;let s=e.map((e,t)=>`a${t}`).join(),o=`((f, ${s}) => {`;for(let e=0;e<t;e++)o+=`a${e} = [...a${e}]; `;if("$nestMap"===a){o+="let r0 = []";for(let e=0;e<t-1;e++)o+=`, r${e+1}`;o+="; "}for(let e=0;e<t;e++)o+=`for (let v${e} of a${e}) {`,"$nestMap"===a&&e<t-1&&(o+=`r${e}.push(r${e+1} = []); `);s=s.replace(/a/g,"v");const i="}".repeat(t);return o+="$nestMap"===a?`r${t-1}.push(f(${s}))${i} return r0})(`:`f(${s})${i}})(`,I(e,[E(o),n[U-1],","],"close")}if("$while"===a||"$asyncWhile"===a||"$do"===a||"$asyncDo"===a){if(1!==U)throw d(r);const e="async"===a.slice(1,6);let t=`(${e?"async ":""}function*(t) {`;return"while"===a.slice(-5).toLowerCase()?t+=`while (${e?"await ":""}t()) yield})(`:t+=`while (1) yield ${e?"await ":""}t()})(`,[E(t),n[0],")"]}if("$nest"===a){if(0===U)throw d(r);let e=`(function*(${n.map((e,t)=>`a${t}`).join()}) {`;for(let t=0;t<n.length;t++)e+=`a${t} = [...a${t}]; `;for(let t=0;t<n.length;t++)e+=`for (let v${t} of a${t}) `;e+=`yield [${n.map((e,t)=>`v${t}`).join()}]})(`;const t=[E(e)];return I(n,t,"close")}if("$throw"===a){if(1!==U)throw d(r);return[E("(e => {throw e})("),n[0],")"]}if("$try"===a||"$awaitTry"===a){if(U<1||U>3)throw d(r);const e=[E("$try"===a?`((t, c = () => {}, f) => {let r; try {r = t()} catch (e) {r = c(e)}${3===U?" finally {f()}":""} return r})(`:`(await (async (t, c = async () => {}, f) => {let r; try {r = await t()} catch (e) {r = await c(e)}${3===U?" finally {await f()}":""} return r})(`)];return I(n,e,"close"),"$awaitTry"===a&&e.push(")"),e}if("$debugger"===a){if(0!==U)throw d(r);return[E("(() => {debugger})()")]}if("$class"===a){if(U>1)throw d(r);const e=[E("(class ")];if(0===U)e.push(E("{})"));else{if(!Array.isArray(n[0])||!n[0]._zap_constructor)throw _(r,0,U);const{start:t,end:s}=n[0]._zap_constructor;e.push(E(t),n[0].slice(1,-1),E(s),")")}return e}if("$extends"===a){if(U<1||U>2)throw d(r);const e=[E("(class extends "),n[0]];if(1===U)e.push(E("{})"));else{if(!Array.isArray(n[1])||!n[1]._zap_constructor)throw _(r,1,U);const{start:t,end:s}=n[1]._zap_constructor;e.push(E(t),n[1].slice(1,-1),E(s),")")}return e}if("$assign"===a){if(U<2)throw d(r);const e=[E("Object.assign(")];return I(n,e,"close")}if("$pick"===a){let e;if(1===U)e=N("$pickDoc");else{if(2!==U)throw d(r);e=N("$pickIn")}return e}if("$fragment"===a){if(U)throw d(r);return[E("document.createDocumentFragment()")]}if("$import"===a){if(e.token)throw w(r);if(!U)throw d(r);const t=A(0);if(1===U)e.import.push([E(`import ${t};\n`)]);else{for(let e=1;e<U;e++)if(!C(e))throw _(r,e,U);e.import.push([E(`import {${n.slice(1).map(e=>e.js).join(", ")}} from ${t};\n`)])}return[E("undefined")]}if("$importAs"===a){if(e.token)throw w(r);if(U<3||U%2==0)throw d(r);const t=A(0),s=[];for(let e=1;e<U;e+=2){if(!C(e))throw _(r,e,U);if(!C(e+1))throw _(r,e+1,U);s.push(`${n[e].js} as ${n[e+1].js}`)}return e.import.push([E(`import {${s.join(", ")}} from ${t};\n`)]),[E("undefined")]}if("$importDefault"===a||"$importAll"===a){if(e.token)throw w(r);if(2!==U)throw d(r);const t=A(0);if(!C(1))throw _(r,1,U);let s="import ";return"$importAll"===a&&(s+="* as "),e.import.push([E(s+`${n[1].js} from ${t};\n`)]),[E("undefined")]}if("$export"===a){if(e.token)throw w(r);if(e.export.size)throw function(e){return Error(`${p(e)}can only be used once`)}(r);if(!U)throw d(r);return n.forEach((t,s)=>{if(!C(s))throw _(r,s,U);if(e.export.has(t.js))throw function(e){return Error(`${p(e)}duplicate export name`)}(r);e.export.add(t.js)}),[E("undefined")]}}};const U=["_create","_createElm"];var b={_first(e){return"string"==typeof e?document.querySelector(e):e&&e[Symbol.iterator]?e[Symbol.iterator]().next().value:e},_autoSelect(e){return"string"==typeof e?[...document.querySelectorAll(e)]:e},_group(e,t,r,s){let n=new Map,a=0;for(let s of t){let o=r(s,a++,t);e?n.set(o,n.has(o)?n.get(o)+1:1):n.has(o)?n.get(o).push(s):n.set(o,[s])}if(void 0!==s)for(let[e,t]of n)n.set(e,s(t,e));return n},_bin(e,t,r,s=((e,t)=>e-t),n){r=[...r].sort(s);let a=new Map;for(let t of r)a.set(t,e?0:[]);for(let n of t)for(let t of r)if(s(n,t)<=0){e?a.set(t,a.get(t)+1):a.get(t).push(n);break}if(void 0!==n)for(let[e,t]of a)a.set(e,n(t,e));return a},_sum(e,t,r){let s=0,n=0;for(let e of t)s+=+(void 0===r?e:r(e,n,t)),n++;return e?s/n:s},_minMaxIndex(e,t,r){let s=NaN,n=0,a=-1,o=e?(e,t)=>e<=t:(e,t)=>e>=t;for(let e of t){if(e=+(void 0===r?e:r(e,n,t)),isNaN(e))return-1;o(e,s)||(s=e,a=n),n++}return a},_minMax(e,t,r){let s,n=NaN,a=0,o=e?(e,t)=>e<=t:(e,t)=>e>=t;for(let e of t){let i=+(void 0===r?e:r(e,a++,t));if(isNaN(i))return;o(i,n)||(n=i,s=e)}return s},_varDev(e,t,r){let s,n=0,a=0,o=0;for(let e of t)e=+(void 0===r?e:r(e,n,t)),s=e-a,a+=s/++n,o+=s*(e-a);return n<2?NaN:(o/=n-1,e?Math.sqrt(o):o)},_random(e,t){return Math.random()*(t-e)+e},_randomInt(e,t){return e=Math.floor(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},_categorical(e,t){const r=Math.random()*t;for(var s=0;s<e.length-1;s++)if(r<e[s])return s;return s},_normal(e,t,r){let s=null;return()=>{let n;if(null===s){let r,a,o;do{r=2*Math.random()-1,a=2*Math.random()-1,o=r*r+a*a}while(o>=1||!o);o=Math.sqrt(-2*Math.log(o)/o),s=a*o,n=e+t*r*o}else n=s*t+e,s=null;return r?Math.exp(n):n}},_binomial(e,t){for(var r=0,s=0;s<e;s++)r+=Math.random()<t;return r},_exponential(e){return-Math.log(1-Math.random())/e},_geometric(e){return 1+Math.floor(Math.log(Math.random())/Math.log(1-e))},_sample(e,t,...r){let s;if(void 0===t)s=e(...r);else{s=[];for(let n=0;n<t;n++)s.push(e(...r))}return s},_ew(e,t){let r;if("string"!=typeof e&&e&&e[Symbol.iterator]){r=[];for(let s of e)r.push(t(s))}else r=t(e);return r},_encode(e,t,r,s=!0){let n=[];for(let a of t){let t=e?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);s&&(t.__data__=a),n.push(t)}return n},_createElm(e,t){return e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)},_create(e,t,r){let s;if(void 0===r)s=this._createElm(e,t);else{s=[];for(let n=0;n<r;n++)s.push(this._createElm(e,t))}return s},_getAttr(e,t){return e.getAttribute(t)},_getProp(e,t){return e[t]},_getStyle(e,t){return window.getComputedStyle(e).getPropertyValue(t)},_apsGet(e,t,r){let s;if("string"==typeof t&&(t=document.querySelectorAll(t)),t&&t[Symbol.iterator]){s=[];for(let n of t)s.push(e(n,r))}else s=e(t,r);return s},_setAttr(e,t,r){e.setAttribute(t,r)},_setProp(e,t,r){e[t]=r},_setStyle(e,t,r){e.style.setProperty(t,r)},_apsSet(e,t,r,s){let n=0;t=this._autoSelect(t);for(let a of t&&t[Symbol.iterator]?t:[t])e(a,r,"function"==typeof s?s.call(a,a.__data__,n++):s);return t},*range(e,t,r=1){for(r=+r,t=+t,t+=1e-14*(t-(e=+e));r>0?e<t:e>t;)yield e,e+=r},*rangeN(e,t,r){if(1==(r=+r))yield(+e+ +t)/2;else{const s=(+t-+e)/(r-1);e=+e-s;for(let t=0;t<r;t++)yield e+=s}},*$seq(e,t,r){for(;t(e);)yield e,e=r(e)},*$zip(...e){for(e=e.map(e=>e[Symbol.iterator]());;){let t=e.map(e=>e.next());if(t.some(e=>e.done))return;yield t.map(e=>e.value)}},$zipMap(e,...t){let r,s=t.map(e=>e[Symbol.iterator]()),n=0,a=[];for(;r=s.map(e=>e.next()),!r.some(e=>e.done);)a.push(e(...r.map(e=>e.value),n++,t));return a},$zipEach(e,...t){let r,s=t.map(e=>e[Symbol.iterator]()),n=0;for(;r=s.map(e=>e.next()),!r.some(e=>e.done);)e(...r.map(e=>e.value),n++,t)},$print(e){return console.log(e),e},$get(e,t,r){return Object.defineProperty(e,t,{get:r,configurable:!0,enumerable:!0})},$set(e,t,r){return Object.defineProperty(e,t,{set:r,configurable:!0,enumerable:!0})},$reduce(e,t,r){let s=0;for(let n of e)r=t(r,n,s++,e);return r},$group(e,t,r){return this._group(!1,e,t,r)},$groupUse:["_group"],$groupCount(e,t,r){return this._group(!0,e,t,r)},$groupCountUse:["_group"],$bin(e,t,r,s){return this._bin(!1,e,t,r,s)},$binUse:["_bin"],$binCount(e,t,r,s){return this._bin(!0,e,t,r,s)},$binCountUse:["_bin"],$sumCumu(e,t){let r=0,s=[],n=0;for(let a of e)s.push(r+=+(void 0===t?a:t(a,n++,e)));return s},$sum(e,t){return this._sum(!1,e,t)},$sumUse:["_sum"],$mean(e,t){return this._sum(!0,e,t)},$meanUse:["_sum"],$minIndex(e,t){return this._minMaxIndex(!1,e,t)},$minIndexUse:["_minMaxIndex"],$maxIndex(e,t){return this._minMaxIndex(!0,e,t)},$maxIndexUse:["_minMaxIndex"],$min(e,t){return this._minMax(!1,e,t)},$minUse:["_minMax"],$max(e,t){return this._minMax(!0,e,t)},$maxUse:["_minMax"],$variance(e,t){return this._varDev(!1,e,t)},$varianceUse:["_varDev"],$deviation(e,t){return this._varDev(!0,e,t)},$deviationUse:["_varDev"],$orderIndex(e,t=((e,t)=>e-t)){return(e=[...e]).map((e,t)=>t).sort((r,s)=>t(e[r],e[s]))},$order(e,t=((e,t)=>e-t)){return[...e].sort(t)},$some(e,t){let r=0;for(let s of e)if(t(s,r++,e))return!0;return!1},$every(e,t){let r=0;for(let s of e)if(!t(s,r++,e))return!1;return!0},$filter(e,t){let r=[],s=0;for(let n of e)t(n,s++,e)&&r.push(n);return r},$count(e,t){let r=0,s=0;for(let n of e)t(n,s++,e)&&r++;return r},$findIndex(e,t){let r=0;for(let s of e){if(t(s,r,e))return r;r++}return-1},$find(e,t){let r=0;for(let s of e)if(t(s,r++,e))return s},$arrObj(e,t){let r=[];for(let s of t||Object.keys(e)){let t=0;for(let n of e[s])(r[t]||(r[t]={}))[s]=n,t++}return r},$objArr(e,t){let r={},s=0;for(let n of e){for(let e of t||Object.keys(n))(r[e]||(r[e]=[]))[s]=n[e];s++}return r},$transpose(e){let t=[],r=0;for(let s of e){let e=0;for(let n of s)(t[e]||(t[e]=[]))[r]=n,e++;r++}return t},$pickDoc(e){return[...document.querySelectorAll(e)]},$random(e=0,t=1,r){return this._sample(this._random,r,+e,+t)},$randomUse:["_sample","_random"],$randomInt(e=0,t=2,r){return this._sample(this._randomInt,r,+e,+t)},$randomIntUse:["_sample","_randomInt"],$categorical(e,t){let r=[],s=0;for(let t of e)r.push(s+=+t);return this._sample(this._categorical,t,r,s)},$categoricalUse:["_sample","_categorical"],$normal(e=0,t=1,r){return this._sample(this._normal(+e,+t),r)},$normalUse:["_sample","_normal"],$logNormal(e=0,t=1,r){return this._sample(this._normal(+e,+t,!0),r)},$logNormalUse:["_sample","_normal"],$binomial(e,t=.5,r){return this._sample(this._binomial,r,+e,+t)},$binomialUse:["_sample","_binomial"],$exponential(e,t){return this._sample(this._exponential,t,+e)},$exponentialUse:["_sample","_exponential"],$geometric(e=.5,t){return this._sample(this._geometric,t,+e)},$geometricUse:["_sample","_geometric"],$shuffle(e){for(let t=(e=[...e]).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));if(t!==r){const s=e[t];e[t]=e[r],e[r]=s}}return e},$ms(e){return new Promise(t=>setTimeout(t,e))},$pickIn(e,t){return[...this._first(e).querySelectorAll(t)]},$pickInUse:["_first"],$insert(e,t,r=(()=>null)){e=this._first(e),t="function"==typeof t?t.call(e,e.__data__):this._autoSelect(t),r=this._first(r.call(e,e.__data__));for(let s of t&&t[Symbol.iterator]?t:[t])e.insertBefore(s,r);return t},$insertUse:["_first","_autoSelect"],$insertEach(e,t,r=(()=>null)){let s=[],n=0;"string"==typeof e?e=document.querySelectorAll(e):e&&e[Symbol.iterator]||(e=[e]);for(let a of e){let e=t.call(a,a.__data__,n),o=this._first(r.call(a,a.__data__,n++));s.push(e);for(let t of e&&e[Symbol.iterator]?e:[e])a.insertBefore(t,o)}return s},$insertEachUse:["_first"],$into(e,t,r=(()=>null)){t=this._first(t),"function"==typeof e?e=e.call(t,t.__data__):"string"==typeof e&&(e=document.querySelectorAll(e)),r=this._first(r.call(t,t.__data__));for(let s of e&&e[Symbol.iterator]?e:[e])t.insertBefore(s,r);return t},$intoUse:["_first"],$encode(e,t,r){return this._encode(!1,e,t,r)},$encodeUse:["_encode"],$encodeSVG(e,t,r){return this._encode(!0,e,t,r)},$encodeSVGUse:["_encode"],$create(e,t){return this._create(!1,e,t)},$createUse:U,$createSVG(e,t){return this._create(!0,e,t)},$createSVGUse:U,$attr(...e){return 2===e.length?this._apsGet(this._getAttr,...e):this._apsSet(this._setAttr,...e)},$attrUse:["_apsGet","_apsSet","_getAttr","_setAttr","_autoSelect"],$prop(...e){return 2===e.length?this._apsGet(this._getProp,...e):this._apsSet(this._setProp,...e)},$propUse:["_apsGet","_apsSet","_getProp","_setProp","_autoSelect"],$style(...e){return 2===e.length?this._apsGet(this._getStyle,...e):this._apsSet(this._setStyle,...e)},$styleUse:["_apsGet","_apsSet","_getStyle","_setStyle","_autoSelect"],$text(...e){return 1===e.length?this._apsGet(this._getProp,e[0],"textContent"):this._apsSet(this._setProp,e[0],"textContent",e[1])},$textUse:["_apsGet","_apsSet","_getProp","_setProp","_autoSelect"],$html(...e){return 1===e.length?this._apsGet(this._getProp,e[0],"innerHTML"):this._apsSet(this._setProp,e[0],"innerHTML",e[1])},$htmlUse:["_apsGet","_apsSet","_getProp","_setProp","_autoSelect"],$remove(e){if((e=this._autoSelect(e))&&e[Symbol.iterator])for(let t of e)t.parentNode.removeChild(t);else e.parentNode.removeChild(e);return e},$removeUse:["_autoSelect"],$lower(e){if((e=this._autoSelect(e))&&e[Symbol.iterator])for(let t of e){let e=t.parentNode;e.insertBefore(t,e.firstChild)}else{let t=e.parentNode;t.insertBefore(e,t.firstChild)}return e},$lowerUse:["_autoSelect"],$raise(e){if((e=this._autoSelect(e))&&e[Symbol.iterator])for(let t of e)t.parentNode.insertBefore(t,null);else e.parentNode.insertBefore(e,null);return e},$raiseUse:["_autoSelect"],$addClass(e,t){if(t=t.trim().split(/^|\s+/),(e=this._autoSelect(e))&&e[Symbol.iterator])for(let r of e)r.classList.add(...t);else e.classList.add(...t);return e},$addClassUse:["_autoSelect"],$removeClass(e,t){if(t=t.trim().split(/^|\s+/),(e=this._autoSelect(e))&&e[Symbol.iterator])for(let r of e)r.classList.remove(...t);else e.classList.remove(...t);return e},$removeClassUse:["_autoSelect"],$removeAttr(e,t){if((e=this._autoSelect(e))&&e[Symbol.iterator])for(let r of e)r.removeAttribute(t);else e.removeAttribute(t);return e},$removeAttrUse:["_autoSelect"],$removeStyle(e,t){if((e=this._autoSelect(e))&&e[Symbol.iterator])for(let r of e)r.style.removeProperty(t);else e.style.removeProperty(t);return e},$removeStyleUse:["_autoSelect"],$hasClass(e,t){let r;if("string"==typeof e&&(e=document.querySelectorAll(e)),e&&e[Symbol.iterator]){r=[];for(let s of e)r.push(s.classList.contains(t))}else r=e.classList.contains(t);return r},$hasAttr(e,t){let r;if("string"==typeof e&&(e=document.querySelectorAll(e)),e&&e[Symbol.iterator]){r=[];for(let s of e)r.push(s.hasAttribute(t))}else r=e.hasAttribute(t);return r},$on(e,t,r,s=!1){e=this._autoSelect(e);for(let n of e&&e[Symbol.iterator]?e:[e]){let e=e=>r.call(n,n.__data__,e);n.__on__||(n.__on__={});for(let a of t.trim().split(/^|\s+/)){if(n.__on__[a]){if(n.__on__[a].has(r))continue}else n.__on__[a]=new Map;n.addEventListener(a,e,s),n.__on__[a].set(r,e)}}return e},$onUse:["_autoSelect"],$off(e,t,r,s=!1){e=this._autoSelect(e);for(let n of e&&e[Symbol.iterator]?e:[e])if(n.__on__)for(let e of t.trim().split(/^|\s+/)){let t=n.__on__[e]?n.__on__[e].get(r):void 0;t&&(n.removeEventListener(e,t,s),n.__on__[e].delete(r))}return e},$offUse:["_autoSelect"],$sketch({width:e=300,height:t=300,context:r="2d",scale:s=!0,...n}={}){let a=window.devicePixelRatio,o=document.createElement("canvas"),i=o.getContext(r,n);return s&&"2d"===r?(o.style.width=e+"px",o.style.height=t+"px",o.width=e*a,o.height=t*a,i.scale(a,a)):(o.width=e,o.height=t),[o,i]},$a(e){return this._create(!1,"a",e)},$aUse:U,$abbr(e){return this._create(!1,"abbr",e)},$abbrUse:U,$address(e){return this._create(!1,"address",e)},$addressUse:U,$area(e){return this._create(!1,"area",e)},$areaUse:U,$article(e){return this._create(!1,"article",e)},$articleUse:U,$aside(e){return this._create(!1,"aside",e)},$asideUse:U,$audio(e){return this._create(!1,"audio",e)},$audioUse:U,$b(e){return this._create(!1,"b",e)},$bUse:U,$bdi(e){return this._create(!1,"bdi",e)},$bdiUse:U,$bdo(e){return this._create(!1,"bdo",e)},$bdoUse:U,$blockquote(e){return this._create(!1,"blockquote",e)},$blockquoteUse:U,$br(e){return this._create(!1,"br",e)},$brUse:U,$button(e){return this._create(!1,"button",e)},$buttonUse:U,$canvas(e){return this._create(!1,"canvas",e)},$canvasUse:U,$caption(e){return this._create(!1,"caption",e)},$captionUse:U,$cite(e){return this._create(!1,"cite",e)},$citeUse:U,$code(e){return this._create(!1,"code",e)},$codeUse:U,$col(e){return this._create(!1,"col",e)},$colUse:U,$colgroup(e){return this._create(!1,"colgroup",e)},$colgroupUse:U,$datalist(e){return this._create(!1,"datalist",e)},$datalistUse:U,$dd(e){return this._create(!1,"dd",e)},$ddUse:U,$del(e){return this._create(!1,"del",e)},$delUse:U,$details(e){return this._create(!1,"details",e)},$detailsUse:U,$dfn(e){return this._create(!1,"dfn",e)},$dfnUse:U,$dialog(e){return this._create(!1,"dialog",e)},$dialogUse:U,$div(e){return this._create(!1,"div",e)},$divUse:U,$dl(e){return this._create(!1,"dl",e)},$dlUse:U,$dt(e){return this._create(!1,"dt",e)},$dtUse:U,$em(e){return this._create(!1,"em",e)},$emUse:U,$embed(e){return this._create(!1,"embed",e)},$embedUse:U,$fieldset(e){return this._create(!1,"fieldset",e)},$fieldsetUse:U,$figcaption(e){return this._create(!1,"figcaption",e)},$figcaptionUse:U,$figure(e){return this._create(!1,"figure",e)},$figureUse:U,$footer(e){return this._create(!1,"footer",e)},$footerUse:U,$form(e){return this._create(!1,"form",e)},$formUse:U,$h1(e){return this._create(!1,"h1",e)},$h1Use:U,$h2(e){return this._create(!1,"h2",e)},$h2Use:U,$h3(e){return this._create(!1,"h3",e)},$h3Use:U,$h4(e){return this._create(!1,"h4",e)},$h4Use:U,$h5(e){return this._create(!1,"h5",e)},$h5Use:U,$h6(e){return this._create(!1,"h6",e)},$h6Use:U,$header(e){return this._create(!1,"header",e)},$headerUse:U,$hgroup(e){return this._create(!1,"hgroup",e)},$hgroupUse:U,$hr(e){return this._create(!1,"hr",e)},$hrUse:U,$i(e){return this._create(!1,"i",e)},$iUse:U,$iframe(e){return this._create(!1,"iframe",e)},$iframeUse:U,$img(e){return this._create(!1,"img",e)},$imgUse:U,$input(e){return this._create(!1,"input",e)},$inputUse:U,$ins(e){return this._create(!1,"ins",e)},$insUse:U,$kbd(e){return this._create(!1,"kbd",e)},$kbdUse:U,$label(e){return this._create(!1,"label",e)},$labelUse:U,$legend(e){return this._create(!1,"legend",e)},$legendUse:U,$li(e){return this._create(!1,"li",e)},$liUse:U,$link(e){return this._create(!1,"link",e)},$linkUse:U,$main(e){return this._create(!1,"main",e)},$mainUse:U,$mark(e){return this._create(!1,"mark",e)},$markUse:U,$menu(e){return this._create(!1,"menu",e)},$menuUse:U,$meta(e){return this._create(!1,"meta",e)},$metaUse:U,$meter(e){return this._create(!1,"meter",e)},$meterUse:U,$nav(e){return this._create(!1,"nav",e)},$navUse:U,$noscript(e){return this._create(!1,"noscript",e)},$noscriptUse:U,$ol(e){return this._create(!1,"ol",e)},$olUse:U,$optgroup(e){return this._create(!1,"optgroup",e)},$optgroupUse:U,$option(e){return this._create(!1,"option",e)},$optionUse:U,$output(e){return this._create(!1,"output",e)},$outputUse:U,$p(e){return this._create(!1,"p",e)},$pUse:U,$picture(e){return this._create(!1,"picture",e)},$pictureUse:U,$pre(e){return this._create(!1,"pre",e)},$preUse:U,$progress(e){return this._create(!1,"progress",e)},$progressUse:U,$q(e){return this._create(!1,"q",e)},$qUse:U,$rb(e){return this._create(!1,"rb",e)},$rbUse:U,$rp(e){return this._create(!1,"rp",e)},$rpUse:U,$rt(e){return this._create(!1,"rt",e)},$rtUse:U,$rtc(e){return this._create(!1,"rtc",e)},$rtcUse:U,$ruby(e){return this._create(!1,"ruby",e)},$rubyUse:U,$s(e){return this._create(!1,"s",e)},$sUse:U,$samp(e){return this._create(!1,"samp",e)},$sampUse:U,$script(e){return this._create(!1,"script",e)},$scriptUse:U,$section(e){return this._create(!1,"section",e)},$sectionUse:U,$select(e){return this._create(!1,"select",e)},$selectUse:U,$slot(e){return this._create(!1,"slot",e)},$slotUse:U,$small(e){return this._create(!1,"small",e)},$smallUse:U,$source(e){return this._create(!1,"source",e)},$sourceUse:U,$span(e){return this._create(!1,"span",e)},$spanUse:U,$strong(e){return this._create(!1,"strong",e)},$strongUse:U,$sub(e){return this._create(!1,"sub",e)},$subUse:U,$summary(e){return this._create(!1,"summary",e)},$summaryUse:U,$sup(e){return this._create(!1,"sup",e)},$supUse:U,$table(e){return this._create(!1,"table",e)},$tableUse:U,$tbody(e){return this._create(!1,"tbody",e)},$tbodyUse:U,$td(e){return this._create(!1,"td",e)},$tdUse:U,$template(e){return this._create(!1,"template",e)},$templateUse:U,$textarea(e){return this._create(!1,"textarea",e)},$textareaUse:U,$tfoot(e){return this._create(!1,"tfoot",e)},$tfootUse:U,$th(e){return this._create(!1,"th",e)},$thUse:U,$thead(e){return this._create(!1,"thead",e)},$theadUse:U,$time(e){return this._create(!1,"time",e)},$timeUse:U,$title(e){return this._create(!1,"title",e)},$titleUse:U,$tr(e){return this._create(!1,"tr",e)},$trUse:U,$track(e){return this._create(!1,"track",e)},$trackUse:U,$u(e){return this._create(!1,"u",e)},$uUse:U,$ul(e){return this._create(!1,"ul",e)},$ulUse:U,$var(e){return this._create(!1,"var",e)},$varUse:U,$video(e){return this._create(!1,"video",e)},$videoUse:U,$wbr(e){return this._create(!1,"wbr",e)},$wbrUse:U,$animate(e){return this._create(!0,"animate",e)},$animateUse:U,$animateMotion(e){return this._create(!0,"animateMotion",e)},$animateMotionUse:U,$animateTransform(e){return this._create(!0,"animateTransform",e)},$animateTransformUse:U,$circle(e){return this._create(!0,"circle",e)},$circleUse:U,$clipPath(e){return this._create(!0,"clipPath",e)},$clipPathUse:U,$defs(e){return this._create(!0,"defs",e)},$defsUse:U,$desc(e){return this._create(!0,"desc",e)},$descUse:U,$discard(e){return this._create(!0,"discard",e)},$discardUse:U,$ellipse(e){return this._create(!0,"ellipse",e)},$ellipseUse:U,$feBlend(e){return this._create(!0,"feBlend",e)},$feBlendUse:U,$feColorMatrix(e){return this._create(!0,"feColorMatrix",e)},$feColorMatrixUse:U,$feComponentTransfer(e){return this._create(!0,"feComponentTransfer",e)},$feComponentTransferUse:U,$feComposite(e){return this._create(!0,"feComposite",e)},$feCompositeUse:U,$feConvolveMatrix(e){return this._create(!0,"feConvolveMatrix",e)},$feConvolveMatrixUse:U,$feDiffuseLighting(e){return this._create(!0,"feDiffuseLighting",e)},$feDiffuseLightingUse:U,$feDisplacementMap(e){return this._create(!0,"feDisplacementMap",e)},$feDisplacementMapUse:U,$feDistantLight(e){return this._create(!0,"feDistantLight",e)},$feDistantLightUse:U,$feDropShadow(e){return this._create(!0,"feDropShadow",e)},$feDropShadowUse:U,$feFlood(e){return this._create(!0,"feFlood",e)},$feFloodUse:U,$feFuncA(e){return this._create(!0,"feFuncA",e)},$feFuncAUse:U,$feFuncB(e){return this._create(!0,"feFuncB",e)},$feFuncBUse:U,$feFuncG(e){return this._create(!0,"feFuncG",e)},$feFuncGUse:U,$feFuncR(e){return this._create(!0,"feFuncR",e)},$feFuncRUse:U,$feGaussianBlur(e){return this._create(!0,"feGaussianBlur",e)},$feGaussianBlurUse:U,$feImage(e){return this._create(!0,"feImage",e)},$feImageUse:U,$feMerge(e){return this._create(!0,"feMerge",e)},$feMergeUse:U,$feMergeNode(e){return this._create(!0,"feMergeNode",e)},$feMergeNodeUse:U,$feMorphology(e){return this._create(!0,"feMorphology",e)},$feMorphologyUse:U,$feOffset(e){return this._create(!0,"feOffset",e)},$feOffsetUse:U,$fePointLight(e){return this._create(!0,"fePointLight",e)},$fePointLightUse:U,$feSpecularLighting(e){return this._create(!0,"feSpecularLighting",e)},$feSpecularLightingUse:U,$feSpotLight(e){return this._create(!0,"feSpotLight",e)},$feSpotLightUse:U,$feTile(e){return this._create(!0,"feTile",e)},$feTileUse:U,$feTurbulence(e){return this._create(!0,"feTurbulence",e)},$feTurbulenceUse:U,$foreignObject(e){return this._create(!0,"foreignObject",e)},$foreignObjectUse:U,$g(e){return this._create(!0,"g",e)},$gUse:U,$hatch(e){return this._create(!0,"hatch",e)},$hatchUse:U,$hatchpath(e){return this._create(!0,"hatchpath",e)},$hatchpathUse:U,$image(e){return this._create(!0,"image",e)},$imageUse:U,$line(e){return this._create(!0,"line",e)},$lineUse:U,$linearGradient(e){return this._create(!0,"linearGradient",e)},$linearGradientUse:U,$marker(e){return this._create(!0,"marker",e)},$markerUse:U,$mask(e){return this._create(!0,"mask",e)},$maskUse:U,$metadata(e){return this._create(!0,"metadata",e)},$metadataUse:U,$mpath(e){return this._create(!0,"mpath",e)},$mpathUse:U,$path(e){return this._create(!0,"path",e)},$pathUse:U,$pattern(e){return this._create(!0,"pattern",e)},$patternUse:U,$polygon(e){return this._create(!0,"polygon",e)},$polygonUse:U,$polyline(e){return this._create(!0,"polyline",e)},$polylineUse:U,$radialGradient(e){return this._create(!0,"radialGradient",e)},$radialGradientUse:U,$rect(e){return this._create(!0,"rect",e)},$rectUse:U,$solidcolor(e){return this._create(!0,"solidcolor",e)},$solidcolorUse:U,$stop(e){return this._create(!0,"stop",e)},$stopUse:U,$svg(e){return this._create(!0,"svg",e)},$svgUse:U,$symbol(e){return this._create(!0,"symbol",e)},$symbolUse:U,$textPath(e){return this._create(!0,"textPath",e)},$textPathUse:U,$tspan(e){return this._create(!0,"tspan",e)},$tspanUse:U,$use(e){return this._create(!0,"use",e)},$useUse:U,$view(e){return this._create(!0,"view",e)},$viewUse:U,$abs(e){return this._ew(e,Math.abs)},$absUse:["_ew"],$acos(e){return this._ew(e,Math.acos)},$acosUse:["_ew"],$acosh(e){return this._ew(e,Math.acosh)},$acoshUse:["_ew"],$asin(e){return this._ew(e,Math.asin)},$asinUse:["_ew"],$asinh(e){return this._ew(e,Math.asinh)},$asinhUse:["_ew"],$atan(e){return this._ew(e,Math.atan)},$atanUse:["_ew"],$atanh(e){return this._ew(e,Math.atanh)},$atanhUse:["_ew"],$cbrt(e){return this._ew(e,Math.cbrt)},$cbrtUse:["_ew"],$ceil(e){return this._ew(e,Math.ceil)},$ceilUse:["_ew"],$clz32(e){return this._ew(e,Math.clz32)},$clz32Use:["_ew"],$cos(e){return this._ew(e,Math.cos)},$cosUse:["_ew"],$cosh(e){return this._ew(e,Math.cosh)},$coshUse:["_ew"],$exp(e){return this._ew(e,Math.exp)},$expUse:["_ew"],$expm1(e){return this._ew(e,Math.expm1)},$expm1Use:["_ew"],$floor(e){return this._ew(e,Math.floor)},$floorUse:["_ew"],$fround(e){return this._ew(e,Math.fround)},$froundUse:["_ew"],$log(e){return this._ew(e,Math.log)},$logUse:["_ew"],$log10(e){return this._ew(e,Math.log10)},$log10Use:["_ew"],$log1p(e){return this._ew(e,Math.log1p)},$log1pUse:["_ew"],$log2(e){return this._ew(e,Math.log2)},$log2Use:["_ew"],$round(e){return this._ew(e,Math.round)},$roundUse:["_ew"],$sign(e){return this._ew(e,Math.sign)},$signUse:["_ew"],$sin(e){return this._ew(e,Math.sin)},$sinUse:["_ew"],$sinh(e){return this._ew(e,Math.sinh)},$sinhUse:["_ew"],$sqrt(e){return this._ew(e,Math.sqrt)},$sqrtUse:["_ew"],$tan(e){return this._ew(e,Math.tan)},$tanUse:["_ew"],$tanh(e){return this._ew(e,Math.tanh)},$tanhUse:["_ew"],$trunc(e){return this._ew(e,Math.trunc)},$truncUse:["_ew"],$toUpperCase(e){return this._ew(e,e=>String.prototype.toUpperCase.call(e))},$toUpperCaseUse:["_ew"],$toLowerCase(e){return this._ew(e,e=>String.prototype.toLowerCase.call(e))},$toLowerCaseUse:["_ew"],$trim(e){return this._ew(e,e=>String.prototype.trim.call(e))},$trimUse:["_ew"],$trimEnd(e){return this._ew(e,e=>String.prototype.trimEnd.call(e))},$trimEndUse:["_ew"],$trimStart(e){return this._ew(e,e=>String.prototype.trimStart.call(e))},$trimStartUse:["_ew"],$neg(e){return this._ew(e,e=>-e)},$negUse:["_ew"],$boolean(e){return this._ew(e,Boolean)},$booleanUse:["_ew"],$number(e){return this._ew(e,Number)},$numberUse:["_ew"],$string(e){return this._ew(e,String)},$stringUse:["_ew"],$date(e){return this._ew(e,e=>new Date(e))},$dateUse:["_ew"],$isInteger(e){return this._ew(e,Number.isInteger)},$isIntegerUse:["_ew"],$isFinite(e){return this._ew(e,Number.isFinite)},$isFiniteUse:["_ew"],$isNaN(e){return this._ew(e,Number.isNaN)},$isNaNUse:["_ew"],$not(e){return this._ew(e,e=>!e)},$notUse:["_ew"]};const{SourceNode:v}=t,S={"(":")","[":"]","{":"}"};function x(e,t){throw Error(`Zap syntax at ${"string"==typeof e?e:`${e.line}:${e.column+1}`}, ${t}`)}function M(e,t,s){e=e.replace("...",""),r.nonCommands.has(e)&&x(t,s?`parameter name is a reserved word: ${e}`:`assigning to a reserved word: ${e}`)}module.exports=(e,{tokens:t=!1,procTokens:o=!1,sourceMap:i=!1,sourceFile:$=null,jsTree:l=!1,js:u=!0,asyncIIFE:c=!1}={})=>{const h={},f=(e=>{const t=[];let n=0,a=1,o=0;const i=new Set(["+","-","*","/","%","^","&&","||","??","<","<=",">",">=","==","!=","<>","><"]);e:for(;n<e.length;){for(let[$,l]of s.entries()){l.lastIndex=n;const s=l.exec(e);if(s){if("newline"===$)a++,o=0;else if("comment"===$||"space"===$)o+=s[0].length;else{const e={type:$,value:s[0],line:a,column:o};if("string"===$&&'"'===s[0][0]){let t;e.value=e.value.replace(/\r?\n/g,()=>(a++,t=!0,"\\n")),t?o=s[0].length-s[0].lastIndexOf("\n")-1:o+=s[0].length}else{if("identifier"===$&&r.commands.has(e.value))e.type="operator";else if("operator"===$&&(s[1]||s[3])){if(!i.has(s[2]))throw Error(`Zap syntax at ${a}:${o+1}, cannot use backtick with ${s[2]}`);e.value=s[2],s[1]&&(e.preTick=!0),s[3]&&(e.postTick=!0)}o+=s[0].length}t.push(e)}n=l.lastIndex;continue e}}let $=e.slice(n,n+30);throw e.length>n+30&&($+=" ..."),Error(`Zap syntax at ${a}:${o+1}, unrecognized token: ${$}`)}return t})(e);if(t&&(h.tokens=f),o||i||l||u){const e=(e=>{const t=[];function r(e,t){throw Error(`Zap syntax at ${e.line}:${e.column+1}, ${t}`)}for(let s=0;s<e.length;s++){const o=e[s],{value:i,type:$}=o;if("~"===i){let t;for(let r=s+1;r<e.length;r++)if("~"!==e[r].value){t=r;break}t||r(o,"invalid use of unary minus");const a=e[t];n.has(a.type)||r(o,"invalid use of unary minus"),a.unaryMinus=t-s,s=t-1}else if("spreadOrRest"===$){const t=e[s+1];t&&a.has(t.type)||r(o,"invalid use of spread syntax"),t.spread=!0}else if("operator"===$)/^(?:[+\-*/%\^?\\@#]?=|=:)$/.test(o.value)&&r(o,`${o.value} requires a left operand`),t.push(o);else if("number"===$||"string"===$||"regexp"===$||"openParentheses"===$)t.push(o);else if("identifier"===$){if(e[s+1]&&/^(?:[+\-*/%\^?\\]?=|=:)$/.test(e[s+1].value))o.type="assign",o.name=o.value,o.operator=e[s+1].value,s++;else{const t=[o.value];let n,a,i;for(let r=s+1;r<e.length;r++)if("identifier"===e[r].type)t.push(e[r].value);else{if("spreadOrRest"!==e[r].type){/^[#@]=$/.test(e[r].value)&&(i=r);break}n&&(a=n),n=r}if(i){if(n){a&&r(e[a],"invalid use of rest syntax"),n!==i-2&&r(e[n],"invalid use of rest syntax");const s=t.length-1;t[s]=`...${t[s]}`}o.names=t,o.operator=e[i].value,o.type="destructure",s=i}else o.name=o.value}"identifier"!==o.type&&(o.unaryMinus&&r(o,"assignment must be at start of subexpression"),o.spread&&r(o,"assign"===o.type?"invalid use of rest syntax":"cannot use rest syntax with first variable when destructure")),t.push(o)}else if("function"===$){"{"===o.value[0]&&(o.async=!0),3===o.value.length&&(o.generator=!0);const n=[];let a,i,$;for(let t=s+1;t<e.length;t++)if("identifier"===e[t].type)n.push(e[t].value);else{if("spreadOrRest"!==e[t].type){"arrow"===e[t].type&&($=t);break}a&&(i=a),a=t}if($){if(new Set(n).size<n.length&&r(e[$],"duplicate parameter name"),a){i&&r(e[i],"invalid use of rest syntax");const t=n.length-1;a===$-2&&"ops"!==n[t]||r(e[a],"invalid use of rest syntax"),n[t]=`...${n[t]}`}o.args=new Set(n),o.arrow=e[$].value,s=$}else o.args=new Set("abcd");t.push(o)}else if("closeBracket"===$)o.bracket=o.value,t.push(o);else if("arrow"===$)r(o,`unexpected ${o.value}`);else{if("closeSubexpr"!==$)throw new Error(`token type ${$} not processed`);{const r=e[s+1];(!r||"closeSubexpr"!==r.type&&"closeBracket"!==r.type)&&t.push(o)}}}return t})(f);o&&(h.procTokens=e),(i||l||u)&&Object.assign(h,((e,t={})=>{let s,n,a=null;const o=[],i=new Set;let $=!1;u();const l=a;function u(){const e={token:s||null,operator:null,operands:[],position:null,assign:null,function:null,variables:null,js:[]};e.token||(e.import=[],e.export=new Set),e.token&&"function"!==e.token.type?e.function=a.function:(e.variables=new Set,e.function=e),a&&o.push(a),a=e}function c(){f();const e=!a.token;e||s.bracket===S[a.token.value[0]]||x(s,"bracket mismatch");const t=a.js;let r;if(e)r={js:";"};else{if("function"===a.token.type){const e=Array.from(a.token.args,e=>"ops"===e?"ops={}":e).join(", ");a.token.js=`${a.token.async?"(async ":"("}${"=>"===a.token.arrow?`(${e}) => {return `:`function${a.token.generator?"*":""}(${e}) {return `}`,s.js="})","=>"===a.token.arrow||a.token.async||a.token.generator||a.token.unaryMinus||(t._zap_constructor={start:`{constructor(${e}) {`,end:"}}"})}else 0===t.length&&x(s,"empty parentheses"),a.token.spread?(t._zap_parenthSpread=!0,a.token.js="...("):a.token.js="(",s.js=")";a.token.unaryMinus&&(a.token.js=`(${"- ".repeat(a.token.unaryMinus)}${a.token.js}`,s.js+=")"),t.unshift(a.token),r=s}if(a.variables){let r=[...a.variables];e&&(r=r.filter(e=>!a.export.has(e)),i.size&&r.push("_z_")),r.length&&t.push({js:`; var ${r.join()}`})}if(t.push(r),e)return t;a=o.pop(),a.operands.push(t)}function h(){return a.operands.length||a.operator||a.assign}function f(){if(h()){!a.assign||a.operands.length||a.operator||x($?"end of code":s,"assignment has no right-hand side"),p();const e=a.operands.pop();a.assign&&(e.unshift(a.assign),"#="===a.assign.operator&&e.unshift({js:"("}),/^(?:[#?]=|=:)$/.test(a.assign.operator)&&e.push({js:")"}),a.assign=null),a.js.length&&a.js.push(","),a.js.push(e)}}function p(){const e=a.operands.length;if(a.operator)a.operands=[y(a,i)],a.operator=null,a.position=null;else if(1===e){const e=a.operands[0],t=!Array.isArray(e);t&&"identifier"===e.type&&r.invalid.has(e.name)&&x(`${e.line}:${e.column+1}`,`invalid use of reserved word: ${e.name}`);const s=t&&e.spread?e:e._zap_parenthSpread?e[0]:null;s&&x(`${s.line}:${s.column+1}`,"spread syntax but no operator"),t&&(a.operands[0]=[e])}else x($?"end of code":s,"multiple operands but no operator")}for(s of e)if(n=s.type,"number"===n||"string"===n||"regexp"===n||"identifier"===n)"identifier"===n?(r.nonCommands.has(s.name)&&s.spread&&x(s,`cannot use spread with: ${s.name}`),r.invalid.has(s.name)&&s.unaryMinus&&x(s,`cannot use unary minus with: ${s.name}`),s.js=`${s.spread?"...":""}${s.name}`):s.js="string"===n?`${s.spread?"...":""}${s.value}`:"regexp"===n?s.value.slice(1):s.value,s.unaryMinus&&(s.js=`(${"- ".repeat(s.unaryMinus)}${s.js})`),a.operands.push(s);else if("function"===n){s.generator&&"=>"===s.arrow&&x(s,"arrow function cannot be a generator function");for(let e of s.args)M(e,s,"isArg");u()}else if("openParentheses"===n)u();else if("closeBracket"===n)a.token||x(s,"bracket mismatch"),c();else if("operator"===n)a.operator&&p(),a.operator=s,a.position=a.operands.length;else if("closeSubexpr"===n)f();else if("assign"===n||"destructure"===n){if(h()&&x(s,"assignment must be at start of subexpression"),"="===s.operator||"=:"===s.operator||"destructure"===n){let e=a.function.token&&a.function.token.args;e&&(e=new Set(Array.from(e,e=>e.replace("...",""))));let t=e?t=>{e.has(t)||a.function.variables.add(t)}:e=>a.function.variables.add(e);if("destructure"===n){let e=[...s.names];e.forEach((r,n)=>{"@="===s.operator&&"null"===r?e[n]="":(M(r,s),t(r.replace("...","")))}),s.js="#="===s.operator?`{${e.join(", ")}} = `:`[${e.join(", ")}] = `}else M(s.name,s),t(s.name),"=:"===s.operator?s.js=`${s.name} = ops.${s.name} ?? (`:s.js=`${s.name} = `}else if(M(s.name,s),"?="===s.operator)s.js=`${s.name} = ${s.name} ?? (`;else{let e=s.operator;"\\="===e?e="=":"^="===e&&(e="**="),s.js=`${s.name} ${e} `}a.assign=s}if($=!0,o.length)throw Error("Zap syntax, unclosed block at end of code");{const e=c(),r={};if(t.js||t.sourceMap){const s=[],n=e=>({js:e,line:1,column:0});if(l.export.size&&s.push(n(`export var ${[...l.export].join(", ")};\n`)),l.import.length&&s.push(l.import),s.push(`(${t.asyncIIFE?"async ":""}() => {\n'use strict'; return `),e.push("\n})();"),i.size){let e="_z_ = {";const t=new Set;for(let r of i){e+=`\n${b[r].toString()},`;const s=b[r+"Use"];s&&s.forEach(e=>t.add(e))}for(let r of t)e+=`\n${b[r].toString()},`;e+="\n},\n",s.push(n(e))}if(e.unshift(s),t.sourceMap){const s=new v(1,0,t.sourceFile,""),n=e=>{Array.isArray(e)?e.forEach(n):"string"==typeof e?s.add(e):s.add(new v(e.line,e.column,t.sourceFile,e.js))};n(e);const{code:a,map:o}=s.toStringWithSourceMap();t.js&&(r.js=a),r.sourceMap=o}else{let t="";const s=e=>{Array.isArray(e)?e.forEach(s):t+="string"==typeof e?e:e.js};s(e),r.js=t}}return t.jsTree&&(r.jsTree=e),r}})(e,{sourceMap:i,sourceFile:$,jsTree:l,js:u,asyncIIFE:c}))}return h}},{"source-map":21}],2:[function(require,module,exports){!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).observablehq=e.observablehq||{})}(this,(function(e){"use strict";function n(e,n,t){t=t||{};var o=e.ownerDocument,r=o.defaultView.CustomEvent;"function"==typeof r?r=new r(n,{detail:t}):((r=o.createEvent("Event")).initEvent(n,!1,!1),r.detail=t),e.dispatchEvent(r)}function t(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return e===(0|e)+""}function r(e){const n=document.createElement("span");return n.className="observablehq--cellname",n.textContent=`${e} = `,n}const a=Symbol.prototype.toString;function s(e){return a.call(e)}const{getOwnPropertySymbols:c,prototype:{hasOwnProperty:i}}=Object,{toStringTag:l}=Symbol,d={},u=c;function p(e,n){return i.call(e,n)}function f(e){return e[l]||e.constructor&&e.constructor.name||"Object"}function m(e,n){try{const t=e[n];return t&&t.constructor,t}catch(e){return d}}const h=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function b(e){try{let n=h.filter(({symbol:n})=>!0===e[n]);if(!n.length)return;const t=n.find(e=>!e.modifier),o="Map"===t.name&&n.find(e=>e.modifier&&e.prefix),r=n.some(e=>e.arrayish),a=n.some(e=>e.setish);return{name:`${o?o.name:""}${t.name}`,symbols:n,arrayish:r&&!a,setish:a}}catch(e){return null}}const{getPrototypeOf:y,getOwnPropertyDescriptors:v}=Object,C=y({});function g(e,o,a,s){let c,i,l,d,u=t(e);e instanceof Map?(c=`Map(${e.size})`,i=x):e instanceof Set?(c=`Set(${e.size})`,i=E):u?(c=`${e.constructor.name}(${e.length})`,i=N):(d=b(e))?(c=`Immutable.${d.name}${"Record"===d.name?"":`(${e.size})`}`,u=d.arrayish,i=d.arrayish?_:d.setish?q:S):s?(c=f(e),i=T):(c=f(e),i=M);const p=document.createElement("span");p.className="observablehq--expanded",a&&p.appendChild(r(a));const m=p.appendChild(document.createElement("a"));m.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M4 7L0 1h8z' fill='currentColor' />\n  </svg>",m.appendChild(document.createTextNode(`${c}${u?" [":" {"}`)),m.addEventListener("mouseup",(function(n){n.stopPropagation(),ie(p,U(e,null,a,s))})),i=i(e);for(let e=0;!(l=i.next()).done&&e<20;++e)p.appendChild(l.value);if(!l.done){const e=p.appendChild(document.createElement("a"));e.className="observablehq--field",e.style.display="block",e.appendChild(document.createTextNode("   more")),e.addEventListener("mouseup",(function(e){e.stopPropagation(),p.insertBefore(l.value,p.lastChild.previousSibling);for(let e=0;!(l=i.next()).done&&e<19;++e)p.insertBefore(l.value,p.lastChild.previousSibling);l.done&&p.removeChild(p.lastChild.previousSibling),n(p,"load")}))}return p.appendChild(document.createTextNode(u?"]":"}")),p}function*x(e){for(const[n,t]of e)yield w(n,t);yield*M(e)}function*E(e){for(const n of e)yield A(n);yield*M(e)}function*q(e){for(const n of e)yield A(n)}function*N(e){for(let n=0,t=e.length;n<t;++n)n in e&&(yield L(n,m(e,n),"observablehq--index"));for(const n in e)!o(n)&&p(e,n)&&(yield L(n,m(e,n),"observablehq--key"));for(const n of u(e))yield L(s(n),m(e,n),"observablehq--symbol")}function*_(e){let n=0;for(const t=e.size;n<t;++n)yield L(n,e.get(n),!0)}function*T(e){for(const n in v(e))yield L(n,m(e,n),"observablehq--key");for(const n of u(e))yield L(s(n),m(e,n),"observablehq--symbol");const n=y(e);n&&n!==C&&(yield $(n))}function*M(e){for(const n in e)p(e,n)&&(yield L(n,m(e,n),"observablehq--key"));for(const n of u(e))yield L(s(n),m(e,n),"observablehq--symbol");const n=y(e);n&&n!==C&&(yield $(n))}function*S(e){for(const[n,t]of e)yield L(n,t,"observablehq--key")}function $(e){const n=document.createElement("div"),t=n.appendChild(document.createElement("span"));return n.className="observablehq--field",t.className="observablehq--prototype-key",t.textContent="  <prototype>",n.appendChild(document.createTextNode(": ")),n.appendChild(ce(e,void 0,void 0,void 0,!0)),n}function L(e,n,t){const o=document.createElement("div"),r=o.appendChild(document.createElement("span"));return o.className="observablehq--field",r.className=t,r.textContent=`  ${e}`,o.appendChild(document.createTextNode(": ")),o.appendChild(ce(n)),o}function w(e,n){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(ce(e)),t.appendChild(document.createTextNode(" => ")),t.appendChild(ce(n)),t}function A(e){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(ce(e)),n}function k(e){const n=window.getSelection();return"Range"===n.type&&(n.containsNode(e,!0)||n.anchorNode.isSelfOrDescendant(e)||n.focusNode.isSelfOrDescendant(e))}function U(e,n,o,a){let s,c,i,l,d=t(e);if(e instanceof Map?(s=`Map(${e.size})`,c=I):e instanceof Set?(s=`Set(${e.size})`,c=D):d?(s=`${e.constructor.name}(${e.length})`,c=P):(l=b(e))?(s=`Immutable.${l.name}${"Record"===l.name?"":`(${e.size})`}`,d=l.arrayish,c=l.arrayish?j:l.setish?O:B):(s=f(e),c=z),n){const n=document.createElement("span");return n.className="observablehq--shallow",o&&n.appendChild(r(o)),n.appendChild(document.createTextNode(s)),n.addEventListener("mouseup",(function(t){k(n)||(t.stopPropagation(),ie(n,U(e)))})),n}const u=document.createElement("span");u.className="observablehq--collapsed",o&&u.appendChild(r(o));const p=u.appendChild(document.createElement("a"));p.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M7 4L1 8V0z' fill='currentColor' />\n  </svg>",p.appendChild(document.createTextNode(`${s}${d?" [":" {"}`)),u.addEventListener("mouseup",(function(n){k(u)||(n.stopPropagation(),ie(u,g(e,0,o,a)))}),!0),c=c(e);for(let e=0;!(i=c.next()).done&&e<20;++e)e>0&&u.appendChild(document.createTextNode(", ")),u.appendChild(i.value);return i.done||u.appendChild(document.createTextNode(", ")),u.appendChild(document.createTextNode(d?"]":"}")),u}function*I(e){for(const[n,t]of e)yield H(n,t);yield*z(e)}function*D(e){for(const n of e)yield ce(n,!0);yield*z(e)}function*O(e){for(const n of e)yield ce(n,!0)}function*j(e){let n=-1,t=0;for(const o=e.size;t<o;++t)t>n+1&&(yield F(t-n-1)),yield ce(e.get(t),!0),n=t;t>n+1&&(yield F(t-n-1))}function*P(e){let n=-1,t=0;for(const o=e.length;t<o;++t)t in e&&(t>n+1&&(yield F(t-n-1)),yield ce(m(e,t),!0),n=t);t>n+1&&(yield F(t-n-1));for(const n in e)!o(n)&&p(e,n)&&(yield R(n,m(e,n),"observablehq--key"));for(const n of u(e))yield R(s(n),m(e,n),"observablehq--symbol")}function*z(e){for(const n in e)p(e,n)&&(yield R(n,m(e,n),"observablehq--key"));for(const n of u(e))yield R(s(n),m(e,n),"observablehq--symbol")}function*B(e){for(const[n,t]of e)yield R(n,t,"observablehq--key")}function F(e){const n=document.createElement("span");return n.className="observablehq--empty",n.textContent=1===e?"empty":`empty  ${e}`,n}function R(e,n,t){const o=document.createDocumentFragment(),r=o.appendChild(document.createElement("span"));return r.className=t,r.textContent=e,o.appendChild(document.createTextNode(": ")),o.appendChild(ce(n,!0)),o}function H(e,n){const t=document.createDocumentFragment();return t.appendChild(ce(e,!0)),t.appendChild(document.createTextNode(" => ")),t.appendChild(ce(n,!0)),t}function K(e,n){var t=e+"",o=t.length;return o<n?new Array(n-o+1).join(0)+t:t}function Y(e){return e<0?"-"+K(-e,6):e>9999?"+"+K(e,6):K(e,4)}var G=Error.prototype.toString;var J=RegExp.prototype.toString;const V=20;function X(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,Q)}function Q(e){var n=e.charCodeAt(0);switch(n){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return n<16?"\\x0"+n.toString(16):n<32?"\\x"+n.toString(16):"\\"+e}function W(e,n){for(var t=0;n.exec(e);)++t;return t}var Z=Function.prototype.toString,ee={prefix:"async "},ne={prefix:"async *"},te={prefix:"class"},oe={prefix:""},re={prefix:"*"};function ae(e,n,t){var o=document.createElement("span");o.className="observablehq--function",t&&o.appendChild(r(t));var a=o.appendChild(document.createElement("span"));return a.className="observablehq--keyword",a.textContent=e.prefix,o.appendChild(document.createTextNode(n)),o}const{prototype:{toString:se}}=Object;function ce(e,n,t,o,a){let c=typeof e;switch(c){case"boolean":case"undefined":e+="";break;case"number":e=0===e&&1/e<0?"-0":e+"";break;case"bigint":e+="n";break;case"symbol":e=s(e);break;case"function":return function(e,n){var t,o,r=Z.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":t=ee;break;case"AsyncGeneratorFunction":t=ne;break;case"GeneratorFunction":t=re;break;default:t=/^class\b/.test(r)?te:oe}return t===te?ae(t,"",n):(o=/^(?:async\s*)?(\w+)\s*=>/.exec(r))?ae(t,"("+o[1]+")",n):(o=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?ae(t,o[1]?"("+o[1].replace(/\s*,\s*/g,", ")+")":"()",n):(o=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?ae(t,o[1]?"("+o[1].replace(/\s*,\s*/g,", ")+")":"()",n):ae(t,"()",n)}(e,o);case"string":return function(e,n,t,o){if(!1===n){if(W(e,/["\n]/g)<=W(e,/`|\${/g)){const n=document.createElement("span");o&&n.appendChild(r(o));const t=n.appendChild(document.createElement("span"));return t.className="observablehq--string",t.textContent=JSON.stringify(e),n}const a=e.split("\n");if(a.length>V&&!t){const t=document.createElement("div");o&&t.appendChild(r(o));const s=t.appendChild(document.createElement("span"));s.className="observablehq--string",s.textContent="`"+X(a.slice(0,V).join("\n"));const c=t.appendChild(document.createElement("span")),i=a.length-V;return c.textContent=`Show ${i} truncated line${i>1?"s":""}`,c.className="observablehq--string-expand",c.addEventListener("mouseup",(function(r){r.stopPropagation(),ie(t,ce(e,n,!0,o))})),t}const s=document.createElement("span");o&&s.appendChild(r(o));const c=s.appendChild(document.createElement("span"));return c.className=`observablehq--string${t?" observablehq--expanded":""}`,c.textContent="`"+X(e)+"`",s}const a=document.createElement("span");o&&a.appendChild(r(o));const s=a.appendChild(document.createElement("span"));return s.className="observablehq--string",s.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}${e.slice(-49)}`:e),a}(e,n,t,o);default:if(null===e){c=null,e="null";break}if(e instanceof Date){c="date",i=e,e=isNaN(i)?"Invalid Date":function(e){return 0===e.getUTCMilliseconds()&&0===e.getUTCSeconds()&&0===e.getUTCMinutes()&&0===e.getUTCHours()}(i)?Y(i.getUTCFullYear())+"-"+K(i.getUTCMonth()+1,2)+"-"+K(i.getUTCDate(),2):Y(i.getFullYear())+"-"+K(i.getMonth()+1,2)+"-"+K(i.getDate(),2)+"T"+K(i.getHours(),2)+":"+K(i.getMinutes(),2)+(i.getMilliseconds()?":"+K(i.getSeconds(),2)+"."+K(i.getMilliseconds(),3):i.getSeconds()?":"+K(i.getSeconds(),2):"");break}if(e===d){c="forbidden",e="[forbidden]";break}switch(se.call(e)){case"[object RegExp]":c="regexp",e=function(e){return J.call(e)}(e);break;case"[object Error]":case"[object DOMException]":c="error",e=function(e){return e.stack||G.call(e)}(e);break;default:return(t?g:U)(e,n,o,a)}}var i;const l=document.createElement("span");o&&l.appendChild(r(o));const u=l.appendChild(document.createElement("span"));return u.className=`observablehq--${c}`,u.textContent=e,l}function ie(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),n(t,"load")}const le=/\s+\(\d+:\d+\)$/m;class de{constructor(e){if(!e)throw new Error("invalid node");this._node=e,e.classList.add("observablehq")}pending(){const{_node:e}=this;e.classList.remove("observablehq--error"),e.classList.add("observablehq--running")}fulfilled(e,t){const{_node:o}=this;if((!(e instanceof Element||e instanceof Text)||e.parentNode&&e.parentNode!==o)&&(e=ce(e,!1,o.firstChild&&o.firstChild.classList&&o.firstChild.classList.contains("observablehq--expanded"),t)).classList.add("observablehq--inspect"),o.classList.remove("observablehq--running","observablehq--error"),o.firstChild!==e)if(o.firstChild){for(;o.lastChild!==o.firstChild;)o.removeChild(o.lastChild);o.replaceChild(e,o.firstChild)}else o.appendChild(e);n(o,"update")}rejected(e,t){const{_node:o}=this;for(o.classList.remove("observablehq--running"),o.classList.add("observablehq--error");o.lastChild;)o.removeChild(o.lastChild);var a=document.createElement("div");a.className="observablehq--inspect",t&&a.appendChild(r(t)),a.appendChild(document.createTextNode((e+"").replace(le,""))),o.appendChild(a),n(o,"error",{error:e})}}de.into=function(e){if("string"==typeof e&&null==(e=document.querySelector(e)))throw new Error("container not found");return function(){return new de(e.appendChild(document.createElement("div")))}},e.Inspector=de,Object.defineProperty(e,"__esModule",{value:!0})}))},{}],3:[function(require,module,exports){},{}],4:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.d3=global.d3||{}))})(this,(function(exports){"use strict";const metas=new Map;const queue=[];const map=queue.map;const some=queue.some;const hasOwnProperty=queue.hasOwnProperty;const origin="https://cdn.jsdelivr.net/npm/";const identifierRe=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/;const versionRe=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/;const extensionRe=/\.[^/]*$/;const mains=["unpkg","jsdelivr","browser","main"];class RequireError extends Error{constructor(message){super(message)}}RequireError.prototype.name=RequireError.name;function main(meta){for(const key of mains){const value=meta[key];if(typeof value==="string"){return extensionRe.test(value)?value:`${value}.js`}}}function parseIdentifier(identifier){const match=identifierRe.exec(identifier);return match&&{name:match[1],version:match[2],path:match[3]}}function resolveMeta(target){const url=`${origin}${target.name}${target.version?`@${target.version}`:""}/package.json`;let meta=metas.get(url);if(!meta)metas.set(url,meta=fetch(url).then(response=>{if(!response.ok)throw new RequireError("unable to load package.json");if(response.redirected&&!metas.has(response.url))metas.set(response.url,meta);return response.json()}));return meta}async function resolve(name,base){if(name.startsWith(origin))name=name.substring(origin.length);if(/^(\w+:)|\/\//i.test(name))return name;if(/^[.]{0,2}\//i.test(name))return new URL(name,base==null?location:base).href;if(!name.length||/^[\s._]/.test(name)||/\s$/.test(name))throw new RequireError("illegal name");const target=parseIdentifier(name);if(!target)return`${origin}${name}`;if(!target.version&&base!=null&&base.startsWith(origin)){const meta=await resolveMeta(parseIdentifier(base.substring(origin.length)));target.version=meta.dependencies&&meta.dependencies[target.name]||meta.peerDependencies&&meta.peerDependencies[target.name]}if(target.path&&!extensionRe.test(target.path))target.path+=".js";if(target.path&&target.version&&versionRe.test(target.version))return`${origin}${target.name}@${target.version}/${target.path}`;const meta=await resolveMeta(target);return`${origin}${meta.name}@${meta.version}/${target.path||main(meta)||"index.js"}`}var require=requireFrom(resolve);function requireFrom(resolver){const cache=new Map;const requireBase=requireRelative(null);function requireAbsolute(url){if(typeof url!=="string")return url;let module=cache.get(url);if(!module)cache.set(url,module=new Promise((resolve,reject)=>{const script=document.createElement("script");script.onload=()=>{try{resolve(queue.pop()(requireRelative(url)))}catch(error){reject(new RequireError("invalid module"))}script.remove()};script.onerror=()=>{reject(new RequireError("unable to load module"));script.remove()};script.async=true;script.src=url;window.define=define;document.head.appendChild(script)}));return module}function requireRelative(base){return name=>Promise.resolve(resolver(name,base)).then(requireAbsolute)}function requireAlias(aliases){return requireFrom((name,base)=>{if(name in aliases){name=aliases[name],base=null;if(typeof name!=="string")return name}return resolver(name,base)})}function require(name){return arguments.length>1?Promise.all(map.call(arguments,requireBase)).then(merge):requireBase(name)}require.alias=requireAlias;require.resolve=resolver;return require}function merge(modules){const o={};for(const m of modules){for(const k in m){if(hasOwnProperty.call(m,k)){if(m[k]==null)Object.defineProperty(o,k,{get:getter(m,k)});else o[k]=m[k]}}}return o}function getter(object,name){return()=>object[name]}function isbuiltin(name){name=name+"";return name==="exports"||name==="module"}function define(name,dependencies,factory){const n=arguments.length;if(n<2)factory=name,dependencies=[];else if(n<3)factory=dependencies,dependencies=typeof name==="string"?[]:name;queue.push(some.call(dependencies,isbuiltin)?require=>{const exports={};const module={exports:exports};return Promise.all(map.call(dependencies,name=>{name=name+"";return name==="exports"?exports:name==="module"?module:require(name)})).then(dependencies=>{factory.apply(null,dependencies);return module.exports})}:require=>Promise.all(map.call(dependencies,require)).then(dependencies=>typeof factory==="function"?factory.apply(null,dependencies):factory))}define.amd={};exports.RequireError=RequireError;exports.require=require;exports.requireFrom=requireFrom;Object.defineProperty(exports,"__esModule",{value:true})}))},{}],5:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),(function(p){return!!p})),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),(function(p){return!!p})),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,(function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p})).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){if(typeof path!=="string")path=path+"";if(path.length===0)return".";var code=path.charCodeAt(0);var hasRoot=code===47;var end=-1;var matchedSlash=true;for(var i=path.length-1;i>=1;--i){code=path.charCodeAt(i);if(code===47){if(!matchedSlash){end=i;break}}else{matchedSlash=false}}if(end===-1)return hasRoot?"/":".";if(hasRoot&&end===1){return"/"}return path.slice(0,end)};function basename(path){if(typeof path!=="string")path=path+"";var start=0;var end=-1;var matchedSlash=true;var i;for(i=path.length-1;i>=0;--i){if(path.charCodeAt(i)===47){if(!matchedSlash){start=i+1;break}}else if(end===-1){matchedSlash=false;end=i+1}}if(end===-1)return"";return path.slice(start,end)}exports.basename=function(path,ext){var f=basename(path);if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){if(typeof path!=="string")path=path+"";var startDot=-1;var startPart=0;var end=-1;var matchedSlash=true;var preDotState=0;for(var i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1){matchedSlash=false;end=i+1}if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){return""}return path.slice(startDot,end)};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:6}],6:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],7:[function(require,module,exports){module.exports=new Map([["",""],["html - inputs",`draw = [\n  s = + (colors :0 :value)','(range :value)'%,'(colors :1 :value)')';\n  panels :0 $style 'background' (+ 'linear-gradient(to right,'s);\n  panels :1 $style 'background' (+ 'radial-gradient('s)];\n\ncolors = @ '#ff0000' '#00ff00' $encode 'input'\n  $attr 'type' 'color'\n  $attr 'value' [a]\n  $on 'input' draw;\n\nrange = $input\n  $attr 'type' 'range'\n  $style 'display' 'block'\n  $style 'width' '250px'\n  $on 'input' draw;\n\npanels = 2 $div  \n  $style 'width' '250px'\n  $style 'height' '250px';\n\n\\draw;\n\ncolors |concat range panels\n  $style 'margin' '10px 10px 0 0'\n  $into ($fragment);`],["html - quiz",`buttonStyle = [a\n  $style 'text-align' 'center'\n  $style 'margin' '2px'\n  $style 'padding' '5px 0'\n  $style 'border' '1px solid gray'\n  $style 'cursor' 'pointer'];\n\nquestion isCorrect @= 2 $h1\n  $style 'display' 'inline-block'\n  $style 'margin-left' '30px';\n  \n(grid = $div)\n  $insert (1 >> 41 10 $encode 'div')\n    $style 'display' 'flex'\n    $insertEach [\n      a >> (a + 9) $encode 'div'\n        $text [a]\n        $style 'flex' '1 1 0'\n        \\buttonStyle\n        $on 'click' [\n          isCorrect $text (this $text $number == answer ? '' '')]];\n\nnewQuestion = $div\n  $text 'New Question'\n  \\buttonStyle\n  $on 'click' [\n    x y @= 1 8 $randomInt 2;\n    question $text (+ x'  'y);\n    answer \\= x * y;\n    isCorrect $text ''];\n\nanswer = null;\nnewQuestion |click;\n@ question isCorrect grid newQuestion\n  $into ($fragment);`],["svg - tile map",`// Median house price by borough (2015, London DataStore)\ndata = 'https://gist.githubusercontent.com/gjmcn/5b1b472d28d49a1d02f4c80515313967/raw/66547019d51748cfb68118398dcc49fe2141329c/london-2015-tile-data.json'\n  \\fetch $await |json $await;\n\nviz = $svg\n  $attr 'width' 600 \n  $attr 'height' 600\n  $attr 'font-size' '0.17px'\n  $attr 'font-family' 'sans-serif';\n  \ng = viz $insert ($g)\n  $attr 'transform' 'translate(0,450) scale(75)';  \n  \ng $insert (data $encodeSVG 'rect')\n  $attr 'x' [a :xTile]\n  $attr 'y' [a :yTile $neg]\n  $attr 'width' 0.97\n  $attr 'height' 0.97\n  $attr 'fill' 'red'\n  $attr 'opacity' [a :HousePrice - 2e5 / 1e6];\n  \ng $insert (data $encodeSVG 'text')\n  $text [a :Borough |slice 0 7]\n  $attr 'x' [a :xTile + 0.05] \n  $attr 'y' [a :yTile $neg + 0.2];\n\nviz;`],["canvas - bubbles",`// these can be changed\nwidth   = 400;\nheight  = 500;\nn       = 100;\nspeed   = ~4;\ngrow    = 0.4;\nburst   = 0.05;\nframes  = 400;\n\n// array of bubble objects\nbubbles = 0 >>> width n $map [xi -> #\n  x xi\n  y (height - ($random * height / 10))\n  r 1\n  color (+ 'rgba('($randomInt 0 200 3 |join)',0.7)')];\n\n// canvas and context\ncanvas ctx @= # ::width ::height $sketch;\ncanvas $style 'background' '#eef';\n\n// draw loop\ndraw = [\n  ctx |clearRect 0 0 width height;\n  bubbles $each [b ->\n    $random < burst ?\n      (b :y height :r 1)\n      (b +:y speed +:r grow);\n    ctx \n      :fillStyle (b :color)\n      <|beginPath\n      <|arc (b :x) (b :y) (b :r) 0 7\n      <|fill];\n  (frames -= 1) ? (window |requestAnimationFrame draw)];\n\n\\draw;\ncanvas;`],["canvas - snow",`// based on: https://p5js.org/examples/simulate-snowflakes.html\n\n// these can be changed\nwidth = 400;\nheight = 600;\nminSize = 1;\nmaxSize = 2;\nangularSpeed = 0.004;\nn = 500;\nframes = 400;\n\n// array for each flake property\ny = $random 0 height n;\ns = $random minSize maxSize n;            \nt = $random 0 (Math :PI * 2) n;          // initial angle\nr = $random 0 (width / 2 ^ 2) n $sqrt;   // radius of spiral\n\n// canvas and context\ncanvas ctx @= # ::width ::height $sketch;\ncanvas $style 'background' 'black';\nctx :fillStyle '#fff';\n\n// draw loop\ndraw = [\n  ctx |clearRect 0 0 width height;\n  y \\= s \`^ 1.1 \`+\` y \`% height;\n  y $each [yi i ->\n    theta = angularSpeed * frames + (t $at i);\n    xi = theta $sin * (r $at i) + (width / 2) % width;\n    ctx \n      <|beginPath\n      <|arc xi yi (s $at i) 0 7\n      <|fill];\n  (frames -= 1) ? (window |requestAnimationFrame draw)];\n\n\\draw;\ncanvas;`],["data analysis",`iris = 'https://raw.githubusercontent.com/vega/vega/master/docs/data/iris.json'\n  \\fetch $await |json $await;\n\n// petal length > 6\niris $filter [a :petalLength > 6];\n\n// order by sepal length\niris $order [a :sepalLength - (b :sepalLength)];\n\n// count by species\niris $groupCount [a :species];\n\n// mean petal width by species\niris $group [a :species] [a $mean [a :petalWidth]];\n\n// comment later code to print an earlier result`],["classification",`// rerun to resample data; the following can be changed:\nnLabeled = 200;\nnTest = 100;\nk = 3;\ndist = [a :x - (b :x) ^ 2 + (a :y - (b :y) ^ 2)];\n  \n// k-nearest-neighbor classifier\nknn = [data testPoint -> data\n  $map [a \\dist testPoint]    // distances to test point \n  $orderIndex                 // indices of sorted dists\n  |slice 0 k                  // top k\n  $map [data $at a 'class']   // corresponding labels\n  $groupCount [a]             // frequency count (a map)\n  $max [a :1] :0];            // most frequent label\n\n// random data in unit square\nlabeled = 1 >> nLabeled $map [#\n  x ($random)\n  y ($random)\n    \\[a :class (a :x ^ 3 + 0.2 > (a :y) $number)]];\ntest = 1 >> nTest $map [#\n  x ($random)\n  y ($random)\n    \\[a :predicted (labeled \\knn a)]];\nboundary = 0 >>> 1 100 $map [#\n  x a\n  y (a ^ 3 + 0.2 <> 1)];\n\n// Vega-Lite plot\nvegaEmbed = 'vega-embed@6.5.2' \\require $await;\nencode = [#\n  x (# field 'x' type 'quantitative')\n  y (# field 'y' type 'quantitative')];\n$div <\\vegaEmbed (#\n  width 400\n  height 400\n  view (# fill '#e5f2fc' stroke false)\n  config (# axis (# grid false domain false))\n  layer (@\n    (#\n      mark 'area'\n      data (# values boundary)\n      encoding (\\encode :color (# value '#fcf1e5')))\n    (#\n      mark 'circle'\n      data (# values labeled)\n      encoding (\\encode :color (# field 'class' type 'nominal')))\n    (#\n      mark 'point'\n      data (# values test)\n      encoding (\\encode\n        :color (# field 'predicted' type 'nominal')\n        :shape (# field 'predicted' type 'nominal')))))\n`],["winner",`// choose a winner or a loser\n\nlist = $ol\n  $style 'margin' '20px 0 0 10px';\n\nadd = $button\n  $text '+'\n  $on 'click' [\n    list $insert ($li)\n      $style 'font' '34px/60px sans-serif'\n      $text ''];\n          \nremove = $button\n  $text '-'\n  $on 'click' [list :children :length > 2 ? (list :lastChild $remove)];\n  \nwinLose = $button\n  $text ''\n  $on 'click' [this $text (this $text == '' ? '' '')];\n  \n  start = $button\n  $text 'Start'\n  $on 'click' {\n    buttons $attr 'disabled' true;\n    players = list $pick 'li';\n    n = players :length;\n    shift = $randomInt 0 n;\n    0 >> 25 $awaitEach {\n      a ^ 2 + 50 $ms $await;\n      players\n        $text ''\n        $style 'opacity' '0.5';\n      players :(shift + a % n)\n        $text (winLose $text)\n        $style 'opacity' '1'};\n    players :(shift + 25 % n) $insert ($span $text '');\n    buttons $removeAttr 'disabled'};\n   \nbuttons = @ add remove winLose start\n  $style 'font-size' '18px'\n  $style 'padding' '5px 24px'\n  $style 'margin' '5px';\n  \nadd <|click <|click <|click;\nbuttons |concat list $into ($fragment);\n`],["d3",`// based on: https://observablehq.com/@d3/bar-chart\n\nd3 = 'd3@5.12.0' \\require $await;\n\ndata = d3 |csv \n  'https://gist.githubusercontent.com/mbostock/81aa27912ad9b1ed577016797a780b2c/raw/3a807eb0cbb0f5904053ac2f9edf765e2f87a2f5/alphabet.csv'\n  [# name (a :letter) value (a :frequency $number)] $await\n    |sort [b :value - (a :value)];\n    \nwidth = 700;\nheight = 500;\nmargin = # top 20 right 0 bottom 30 left 40;    \n    \nx = d3 |scaleBand\n    |domain (data |map [a :name])\n    |range (@ (margin :left) (width - (margin :right)))\n    |padding 0.1;\n    \ny = d3 |scaleLinear\n    |domain (@ 0 (d3 |max data [a :value])) |nice\n    |range (@ (height - (margin :bottom)) (margin :top));\n    \nxAxis = [a\n    |attr 'transform' (+ 'translate(0,'(height - (margin :bottom))')')\n    <\\(d3 |axisBottom x |tickSizeOuter 0)];\n\nyAxis = [a\n    |attr 'transform' (+ 'translate('(margin :left)',0)')\n    <\\(d3 |axisLeft y)\n    <\\[a |select '.domain' |remove]];\n    \nsvg = d3 |create 'svg'\n    |attr 'viewBox' (@ 0 0 width height);\n\nsvg |append 'g'\n      |attr 'fill' 'steelblue'\n    |selectAll 'rect'\n    |data data\n    |join 'rect'\n      |attr 'x' [a :name \\x]\n      |attr 'y' [a :value \\y]\n      |attr 'height' [0 \\y - (a :value \\y)]\n      |attr 'width' (x |bandwidth);\n\nsvg |append 'g'\n    \\xAxis;\n\nsvg |append 'g'\n    \\yAxis;\n\nsvg |node;\n\n`]])},{}],8:[function(require,module,exports){(()=>{"use strict";window.require=require("d3-require").require;const isStorage=require("./storageAvailable.js")("localStorage");let resultWidth=isStorage&&localStorage.resultWidth?+localStorage.resultWidth:50;const saveState=()=>{if(isStorage){localStorage.zapCode=editor.getValue();localStorage.resultWidth=resultWidth}};const resultElm=document.getElementById("result");const examplesElm=document.getElementById("examples-select");const helpElm=document.getElementById("help-content");const resultBgrd="#2b3039";resultElm.style.backgroundColor=resultBgrd;resultElm.inspector=new(require("@observablehq/inspector").Inspector)(resultElm);ace.require("ace/ext/language_tools");const editor=ace.edit("editor",{fontSize:13.6,fontFamily:"'Source Code Pro', monospace",tabSize:2,useSoftTabs:true,highlightActiveLine:false,useWorker:false,enableBasicAutocompletion:true,enableLiveAutocompletion:true});editor.setTheme("ace/theme/tomorrow_night_bright");editor.session.setMode(`ace/mode/zap`);editor.setAutoScrollEditorIntoView(true);editor.commands.removeCommand(editor.commands.byName.showSettingsMenu);editor.setShowPrintMargin(false);if(isStorage&&localStorage.zapCode){editor.setValue(localStorage.zapCode,-1)}const setEditorWidth=()=>{resultElm.style.width=resultWidth+"%";document.getElementById("editor").style.width=100-resultWidth+"%";editor.resize()};setEditorWidth();editor.focus();const print=(result,type)=>{if(result instanceof Element||result instanceof DocumentFragment){resultElm.style.backgroundColor="#fff";resultElm.innerHTML="";resultElm.appendChild(result)}else{resultElm.style.backgroundColor=resultBgrd;resultElm.style.borderStyle="solid";if(type==="waiting"){resultElm.innerHTML='<span class="zap-message">waiting ...</span>'}else if(type==="throw"){resultElm.inspector.rejected(result)}else if(result instanceof Error){resultElm.innerHTML=`<span class="zap-error">${""+result}</span>`}else{resultElm.inspector.fulfilled(result)}}};let runCode;{const zap=require("../../dist/zap.cjs");let runId;runCode=isHelp=>{const thisRunId=runId=Symbol();saveState();resultElm.classList.remove("observablehq--error");resultElm.innerHTML="";if(isHelp){print(helpElm);return}let jsCode;try{jsCode=zap(editor.getValue(),{asyncIIFE:true})}catch(err){print(err,"throw");return}print(null,"waiting");new Promise(resolve=>{resolve((1,eval)(jsCode.js))}).then(val=>{if(thisRunId===runId)print(val)}).catch(err=>{if(thisRunId===runId)print(err,"throw")})};document.getElementById("run-button").addEventListener("click",()=>runCode());document.getElementById("help-button").addEventListener("click",()=>runCode(true));if(!editor.getValue().trim())runCode(true)}{const examples=require("./examples.js");for(let name of examples.keys()){const elm=document.createElement("option");elm.innerText=name;examplesElm.appendChild(elm)}examplesElm.addEventListener("change",evt=>{if(evt.target.value){editor.setValue(examples.get(evt.target.value),-1);runCode()}})}{document.addEventListener("keydown",(function(evt){if((evt.ctrlKey||evt.shiftKey)&&evt.key==="Enter"){runCode()}else if(evt.altKey&&evt.key==="a"){resultWidth=50;setEditorWidth()}else if(evt.altKey&&evt.key==="w"){resultWidth=Math.max(resultWidth-2,8);setEditorWidth()}else if(evt.altKey&&evt.key==="q"){resultWidth=Math.min(resultWidth+2,92);setEditorWidth()}else if(evt.ctrlKey&&evt.shiftKey&&evt.key==="S"){saveState()}else{return}evt.preventDefault();evt.stopImmediatePropagation()}))}window.addEventListener("beforeunload",saveState)})()},{"../../dist/zap.cjs":1,"./examples.js":7,"./storageAvailable.js":9,"@observablehq/inspector":2,"d3-require":4}],9:[function(require,module,exports){module.exports=type=>{var storage;try{storage=window[type];var x="__storage_test__";storage.setItem(x,x);storage.removeItem(x);return true}catch(e){return e instanceof DOMException&&(e.code===22||e.code===1014||e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&(storage&&storage.length!==0)}}},{}],10:[function(require,module,exports){class ArraySet{constructor(){this._array=[];this._set=new Map}static fromArray(aArray,aAllowDuplicates){const set=new ArraySet;for(let i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set}size(){return this._set.size}add(aStr,aAllowDuplicates){const isDuplicate=this.has(aStr);const idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set.set(aStr,idx)}}has(aStr){return this._set.has(aStr)}indexOf(aStr){const idx=this._set.get(aStr);if(idx>=0){return idx}throw new Error('"'+aStr+'" is not in the set.')}at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)}toArray(){return this._array.slice()}}exports.ArraySet=ArraySet},{}],11:[function(require,module,exports){const base64=require("./base64");const VLQ_BASE_SHIFT=5;const VLQ_BASE=1<<VLQ_BASE_SHIFT;const VLQ_BASE_MASK=VLQ_BASE-1;const VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){const isNegative=(aValue&1)===1;const shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){let encoded="";let digit;let vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded}},{"./base64":12}],12:[function(require,module,exports){const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(0<=number&&number<intToCharMap.length){return intToCharMap[number]}throw new TypeError("Must be between 0 and 63: "+number)}},{}],13:[function(require,module,exports){exports.GREATEST_LOWER_BOUND=1;exports.LEAST_UPPER_BOUND=2;function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){const mid=Math.floor((aHigh-aLow)/2)+aLow;const cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return aHigh<aHaystack.length?aHigh:-1}return mid}if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return mid}return aLow<0?-1:aLow}exports.search=function search(aNeedle,aHaystack,aCompare,aBias){if(aHaystack.length===0){return-1}let index=recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(index<0){return-1}while(index-1>=0){if(aCompare(aHaystack[index],aHaystack[index-1],true)!==0){break}--index}return index}},{}],14:[function(require,module,exports){const util=require("./util");function generatedPositionAfter(mappingA,mappingB){const lineA=mappingA.generatedLine;const lineB=mappingB.generatedLine;const columnA=mappingA.generatedColumn;const columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0}class MappingList{constructor(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)}add(aMapping){if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}}toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositionsInflated);this._sorted=true}return this._array}}exports.MappingList=MappingList},{"./util":19}],15:[function(require,module,exports){(function(__dirname){if(typeof fetch==="function"){let mappingsWasmUrl=null;module.exports=function readWasm(){if(typeof mappingsWasmUrl!=="string"){throw new Error("You must provide the URL of lib/mappings.wasm by calling "+"SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) "+"before using SourceMapConsumer")}return fetch(mappingsWasmUrl).then(response=>response.arrayBuffer())};module.exports.initialize=url=>mappingsWasmUrl=url}else{const fs=require("fs");const path=require("path");module.exports=function readWasm(){return new Promise((resolve,reject)=>{const wasmPath=path.join(__dirname,"mappings.wasm");fs.readFile(wasmPath,null,(error,data)=>{if(error){reject(error);return}resolve(data.buffer)})})};module.exports.initialize=_=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}}}).call(this,"/../node_modules/source-map/lib")},{fs:3,path:5}],16:[function(require,module,exports){const util=require("./util");const binarySearch=require("./binary-search");const ArraySet=require("./array-set").ArraySet;const base64VLQ=require("./base64-vlq");const readWasm=require("../lib/read-wasm");const wasm=require("./wasm");const INTERNAL=Symbol("smcInternal");class SourceMapConsumer{constructor(aSourceMap,aSourceMapURL){if(aSourceMap==INTERNAL){return Promise.resolve(this)}return _factory(aSourceMap,aSourceMapURL)}static initialize(opts){readWasm.initialize(opts["lib/mappings.wasm"])}static fromSourceMap(aSourceMap,aSourceMapURL){return _factoryBSM(aSourceMap,aSourceMapURL)}static with(rawSourceMap,sourceMapUrl,f){let consumer=null;const promise=new SourceMapConsumer(rawSourceMap,sourceMapUrl);return promise.then(c=>{consumer=c;return f(c)}).then(x=>{if(consumer){consumer.destroy()}return x},e=>{if(consumer){consumer.destroy()}throw e})}_parseMappings(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")}eachMapping(aCallback,aContext,aOrder){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(aArgs){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}}SourceMapConsumer.prototype._version=3;SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.GREATEST_LOWER_BOUND=1;SourceMapConsumer.LEAST_UPPER_BOUND=2;exports.SourceMapConsumer=SourceMapConsumer;class BasicSourceMapConsumer extends SourceMapConsumer{constructor(aSourceMap,aSourceMapURL){return super(INTERNAL).then(that=>{let sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=util.parseSourceMapInput(aSourceMap)}const version=util.getArg(sourceMap,"version");let sources=util.getArg(sourceMap,"sources");const names=util.getArg(sourceMap,"names",[]);let sourceRoot=util.getArg(sourceMap,"sourceRoot",null);const sourcesContent=util.getArg(sourceMap,"sourcesContent",null);const mappings=util.getArg(sourceMap,"mappings");const file=util.getArg(sourceMap,"file",null);if(version!=that._version){throw new Error("Unsupported version: "+version)}if(sourceRoot){sourceRoot=util.normalize(sourceRoot)}sources=sources.map(String).map(util.normalize).map((function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source}));that._names=ArraySet.fromArray(names.map(String),true);that._sources=ArraySet.fromArray(sources,true);that._absoluteSources=that._sources.toArray().map((function(s){return util.computeSourceURL(sourceRoot,s,aSourceMapURL)}));that.sourceRoot=sourceRoot;that.sourcesContent=sourcesContent;that._mappings=mappings;that._sourceMapURL=aSourceMapURL;that.file=file;that._computedColumnSpans=false;that._mappingsPtr=0;that._wasm=null;return wasm().then(w=>{that._wasm=w;return that})})}_findSourceIndex(aSource){let relativeSource=aSource;if(this.sourceRoot!=null){relativeSource=util.relative(this.sourceRoot,relativeSource)}if(this._sources.has(relativeSource)){return this._sources.indexOf(relativeSource)}for(let i=0;i<this._absoluteSources.length;++i){if(this._absoluteSources[i]==aSource){return i}}return-1}static fromSourceMap(aSourceMap,aSourceMapURL){return new BasicSourceMapConsumer(aSourceMap.toString())}get sources(){return this._absoluteSources.slice()}_getMappingsPtr(){if(this._mappingsPtr===0){this._parseMappings(this._mappings,this.sourceRoot)}return this._mappingsPtr}_parseMappings(aStr,aSourceRoot){const size=aStr.length;const mappingsBufPtr=this._wasm.exports.allocate_mappings(size);const mappingsBuf=new Uint8Array(this._wasm.exports.memory.buffer,mappingsBufPtr,size);for(let i=0;i<size;i++){mappingsBuf[i]=aStr.charCodeAt(i)}const mappingsPtr=this._wasm.exports.parse_mappings(mappingsBufPtr);if(!mappingsPtr){const error=this._wasm.exports.get_last_error();let msg=`Error parsing mappings (code ${error}): `;switch(error){case 1:msg+="the mappings contained a negative line, column, source index, or name index";break;case 2:msg+="the mappings contained a number larger than 2**32";break;case 3:msg+="reached EOF while in the middle of parsing a VLQ";break;case 4:msg+="invalid base 64 character while parsing a VLQ";break;default:msg+="unknown error code";break}throw new Error(msg)}this._mappingsPtr=mappingsPtr}eachMapping(aCallback,aContext,aOrder){const context=aContext||null;const order=aOrder||SourceMapConsumer.GENERATED_ORDER;const sourceRoot=this.sourceRoot;this._wasm.withMappingCallback(mapping=>{if(mapping.source!==null){mapping.source=this._sources.at(mapping.source);mapping.source=util.computeSourceURL(sourceRoot,mapping.source,this._sourceMapURL);if(mapping.name!==null){mapping.name=this._names.at(mapping.name)}}aCallback.call(context,mapping)},()=>{switch(order){case SourceMapConsumer.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case SourceMapConsumer.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(aArgs){let source=util.getArg(aArgs,"source");const originalLine=util.getArg(aArgs,"line");const originalColumn=aArgs.column||0;source=this._findSourceIndex(source);if(source<0){return[]}if(originalLine<1){throw new Error("Line numbers must be >= 1")}if(originalColumn<0){throw new Error("Column numbers must be >= 0")}const mappings=[];this._wasm.withMappingCallback(m=>{let lastColumn=m.lastGeneratedColumn;if(this._computedColumnSpans&&lastColumn===null){lastColumn=Infinity}mappings.push({line:m.generatedLine,column:m.generatedColumn,lastColumn:lastColumn})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),source,originalLine-1,"column"in aArgs,originalColumn)});return mappings}destroy(){if(this._mappingsPtr!==0){this._wasm.exports.free_mappings(this._mappingsPtr);this._mappingsPtr=0}}computeColumnSpans(){if(this._computedColumnSpans){return}this._wasm.exports.compute_column_spans(this._getMappingsPtr());this._computedColumnSpans=true}originalPositionFor(aArgs){const needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};if(needle.generatedLine<1){throw new Error("Line numbers must be >= 1")}if(needle.generatedColumn<0){throw new Error("Column numbers must be >= 0")}let bias=util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND);if(bias==null){bias=SourceMapConsumer.GREATEST_LOWER_BOUND}let mapping;this._wasm.withMappingCallback(m=>mapping=m,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),needle.generatedLine-1,needle.generatedColumn,bias)});if(mapping){if(mapping.generatedLine===needle.generatedLine){let source=util.getArg(mapping,"source",null);if(source!==null){source=this._sources.at(source);source=util.computeSourceURL(this.sourceRoot,source,this._sourceMapURL)}let name=util.getArg(mapping,"name",null);if(name!==null){name=this._names.at(name)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){if(!this.sourcesContent){return false}return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(sc){return sc==null}))}sourceContentFor(aSource,nullOnMissing){if(!this.sourcesContent){return null}const index=this._findSourceIndex(aSource);if(index>=0){return this.sourcesContent[index]}let relativeSource=aSource;if(this.sourceRoot!=null){relativeSource=util.relative(this.sourceRoot,relativeSource)}let url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){const fileUriAbsPath=relativeSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+relativeSource)){return this.sourcesContent[this._sources.indexOf("/"+relativeSource)]}}if(nullOnMissing){return null}throw new Error('"'+relativeSource+'" is not in the SourceMap.')}generatedPositionFor(aArgs){let source=util.getArg(aArgs,"source");source=this._findSourceIndex(source);if(source<0){return{line:null,column:null,lastColumn:null}}const needle={source:source,originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};if(needle.originalLine<1){throw new Error("Line numbers must be >= 1")}if(needle.originalColumn<0){throw new Error("Column numbers must be >= 0")}let bias=util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND);if(bias==null){bias=SourceMapConsumer.GREATEST_LOWER_BOUND}let mapping;this._wasm.withMappingCallback(m=>mapping=m,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),needle.source,needle.originalLine-1,needle.originalColumn,bias)});if(mapping){if(mapping.source===needle.source){let lastColumn=mapping.lastGeneratedColumn;if(this._computedColumnSpans&&lastColumn===null){lastColumn=Infinity}return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:lastColumn}}}return{line:null,column:null,lastColumn:null}}}BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;exports.BasicSourceMapConsumer=BasicSourceMapConsumer;class IndexedSourceMapConsumer extends SourceMapConsumer{constructor(aSourceMap,aSourceMapURL){return super(INTERNAL).then(that=>{let sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=util.parseSourceMapInput(aSourceMap)}const version=util.getArg(sourceMap,"version");const sections=util.getArg(sourceMap,"sections");if(version!=that._version){throw new Error("Unsupported version: "+version)}that._sources=new ArraySet;that._names=new ArraySet;that.__generatedMappings=null;that.__originalMappings=null;that.__generatedMappingsUnsorted=null;that.__originalMappingsUnsorted=null;let lastOffset={line:-1,column:0};return Promise.all(sections.map(s=>{if(s.url){throw new Error("Support for url field in sections not implemented.")}const offset=util.getArg(s,"offset");const offsetLine=util.getArg(offset,"line");const offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column){throw new Error("Section offsets must be ordered and non-overlapping.")}lastOffset=offset;const cons=new SourceMapConsumer(util.getArg(s,"map"),aSourceMapURL);return cons.then(consumer=>({generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:consumer}))})).then(s=>{that._sections=s;return that})})}get _generatedMappings(){if(!this.__generatedMappings){this._sortGeneratedMappings()}return this.__generatedMappings}get _originalMappings(){if(!this.__originalMappings){this._sortOriginalMappings()}return this.__originalMappings}get _generatedMappingsUnsorted(){if(!this.__generatedMappingsUnsorted){this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappingsUnsorted}get _originalMappingsUnsorted(){if(!this.__originalMappingsUnsorted){this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappingsUnsorted}_sortGeneratedMappings(){const mappings=this._generatedMappingsUnsorted;mappings.sort(util.compareByGeneratedPositionsDeflated);this.__generatedMappings=mappings}_sortOriginalMappings(){const mappings=this._originalMappingsUnsorted;mappings.sort(util.compareByOriginalPositions);this.__originalMappings=mappings}get sources(){const sources=[];for(let i=0;i<this._sections.length;i++){for(let j=0;j<this._sections[i].consumer.sources.length;j++){sources.push(this._sections[i].consumer.sources[j])}}return sources}originalPositionFor(aArgs){const needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};const sectionIndex=binarySearch.search(needle,this._sections,(function(aNeedle,section){const cmp=aNeedle.generatedLine-section.generatedOffset.generatedLine;if(cmp){return cmp}return aNeedle.generatedColumn-section.generatedOffset.generatedColumn}));const section=this._sections[sectionIndex];if(!section){return{source:null,line:null,column:null,name:null}}return section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias})}hasContentsOfAllSources(){return this._sections.every((function(s){return s.consumer.hasContentsOfAllSources()}))}sourceContentFor(aSource,nullOnMissing){for(let i=0;i<this._sections.length;i++){const section=this._sections[i];const content=section.consumer.sourceContentFor(aSource,true);if(content){return content}}if(nullOnMissing){return null}throw new Error('"'+aSource+'" is not in the SourceMap.')}generatedPositionFor(aArgs){for(let i=0;i<this._sections.length;i++){const section=this._sections[i];if(section.consumer._findSourceIndex(util.getArg(aArgs,"source"))===-1){continue}const generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition){const ret={line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)};return ret}}return{line:null,column:null}}_parseMappings(aStr,aSourceRoot){const generatedMappings=this.__generatedMappingsUnsorted=[];const originalMappings=this.__originalMappingsUnsorted=[];for(let i=0;i<this._sections.length;i++){const section=this._sections[i];const sectionMappings=[];section.consumer.eachMapping(m=>sectionMappings.push(m));for(let j=0;j<sectionMappings.length;j++){const mapping=sectionMappings[j];let source=util.computeSourceURL(section.consumer.sourceRoot,null,this._sourceMapURL);this._sources.add(source);source=this._sources.indexOf(source);let name=null;if(mapping.name){this._names.add(mapping.name);name=this._names.indexOf(mapping.name)}const adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};generatedMappings.push(adjustedMapping);if(typeof adjustedMapping.originalLine==="number"){originalMappings.push(adjustedMapping)}}}}eachMapping(aCallback,aContext,aOrder){const context=aContext||null;const order=aOrder||SourceMapConsumer.GENERATED_ORDER;let mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}const sourceRoot=this.sourceRoot;mappings.map((function(mapping){let source=null;if(mapping.source!==null){source=this._sources.at(mapping.source);source=util.computeSourceURL(sourceRoot,source,this._sourceMapURL)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name===null?null:this._names.at(mapping.name)}}),this).forEach(aCallback,context)}_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator,aBias)}allGeneratedPositionsFor(aArgs){const line=util.getArg(aArgs,"line");const needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};needle.source=this._findSourceIndex(needle.source);if(needle.source<0){return[]}if(needle.originalLine<1){throw new Error("Line numbers must be >= 1")}if(needle.originalColumn<0){throw new Error("Column numbers must be >= 0")}const mappings=[];let index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(index>=0){let mapping=this._originalMappings[index];if(aArgs.column===undefined){const originalLine=mapping.originalLine;while(mapping&&mapping.originalLine===originalLine){let lastColumn=mapping.lastGeneratedColumn;if(this._computedColumnSpans&&lastColumn===null){lastColumn=Infinity}mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:lastColumn});mapping=this._originalMappings[++index]}}else{const originalColumn=mapping.originalColumn;while(mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn){let lastColumn=mapping.lastGeneratedColumn;if(this._computedColumnSpans&&lastColumn===null){lastColumn=Infinity}mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:lastColumn});mapping=this._originalMappings[++index]}}}return mappings}destroy(){for(let i=0;i<this._sections.length;i++){this._sections[i].consumer.destroy()}}}exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer;function _factory(aSourceMap,aSourceMapURL){let sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=util.parseSourceMapInput(aSourceMap)}const consumer=sourceMap.sections!=null?new IndexedSourceMapConsumer(sourceMap,aSourceMapURL):new BasicSourceMapConsumer(sourceMap,aSourceMapURL);return Promise.resolve(consumer)}function _factoryBSM(aSourceMap,aSourceMapURL){return BasicSourceMapConsumer.fromSourceMap(aSourceMap,aSourceMapURL)}},{"../lib/read-wasm":15,"./array-set":10,"./base64-vlq":11,"./binary-search":13,"./util":19,"./wasm":20}],17:[function(require,module,exports){const base64VLQ=require("./base64-vlq");const util=require("./util");const ArraySet=require("./array-set").ArraySet;const MappingList=require("./mapping-list").MappingList;class SourceMapGenerator{constructor(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}static fromSourceMap(aSourceMapConsumer){const sourceRoot=aSourceMapConsumer.sourceRoot;const generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping((function(mapping){const newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)}));aSourceMapConsumer.sources.forEach((function(sourceFile){let sourceRelative=sourceFile;if(sourceRoot!==null){sourceRelative=util.relative(sourceRoot,sourceFile)}if(!generator._sources.has(sourceRelative)){generator._sources.add(sourceRelative)}const content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}}));return generator}addMapping(aArgs){const generated=util.getArg(aArgs,"generated");const original=util.getArg(aArgs,"original",null);let source=util.getArg(aArgs,"source",null);let name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null){source=String(source);if(!this._sources.has(source)){this._sources.add(source)}}if(name!=null){name=String(name);if(!this._names.has(name)){this._names.add(name)}}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})}setSourceContent(aSourceFile,aSourceContent){let source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents=Object.create(null)}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}}applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){let sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}const sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}const newSources=this._mappings.toArray().length>0?new ArraySet:this._sources;const newNames=new ArraySet;this._mappings.unsortedForEach((function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){const original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}const source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}const name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}}),this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach((function(srcFile){const content=aSourceMapConsumer.sourceContentFor(srcFile);if(content!=null){if(aSourceMapPath!=null){srcFile=util.join(aSourceMapPath,srcFile)}if(sourceRoot!=null){srcFile=util.relative(sourceRoot,srcFile)}this.setSourceContent(srcFile,content)}}),this)}_validateMapping(aGenerated,aOriginal,aSource,aName){if(aOriginal&&typeof aOriginal.line!=="number"&&typeof aOriginal.column!=="number"){throw new Error("original.line and original.column are not numbers -- you probably meant to omit "+"the original mapping entirely and only map the generated position. If so, pass "+"null for the original mapping instead of an object with empty or null values.")}if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}}_serializeMappings(){let previousGeneratedColumn=0;let previousGeneratedLine=1;let previousOriginalColumn=0;let previousOriginalLine=0;let previousName=0;let previousSource=0;let result="";let next;let mapping;let nameIdx;let sourceIdx;const mappings=this._mappings.toArray();for(let i=0,len=mappings.length;i<len;i++){mapping=mappings[i];next="";if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){next+=";";previousGeneratedLine++}}else if(i>0){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1])){continue}next+=","}next+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){sourceIdx=this._sources.indexOf(mapping.source);next+=base64VLQ.encode(sourceIdx-previousSource);previousSource=sourceIdx;next+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;next+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){nameIdx=this._names.indexOf(mapping.name);next+=base64VLQ.encode(nameIdx-previousName);previousName=nameIdx}}result+=next}return result}_generateSourcesContent(aSources,aSourceRoot){return aSources.map((function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}const key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null}),this)}toJSON(){const map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map}toString(){return JSON.stringify(this.toJSON())}}SourceMapGenerator.prototype._version=3;exports.SourceMapGenerator=SourceMapGenerator},{"./array-set":10,"./base64-vlq":11,"./mapping-list":14,"./util":19}],18:[function(require,module,exports){const SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;const util=require("./util");const REGEX_NEWLINE=/(\r?\n)/;const NEWLINE_CODE=10;const isSourceNode="$$$isSourceNode$$$";class SourceNode{constructor(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}static fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){const node=new SourceNode;const remainingLines=aGeneratedCode.split(REGEX_NEWLINE);let remainingLinesIndex=0;const shiftNextLine=function(){const lineContents=getNextLine();const newLine=getNextLine()||"";return lineContents+newLine;function getNextLine(){return remainingLinesIndex<remainingLines.length?remainingLines[remainingLinesIndex++]:undefined}};let lastGeneratedLine=1,lastGeneratedColumn=0;let lastMapping=null;let nextLine;aSourceMapConsumer.eachMapping((function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{nextLine=remainingLines[remainingLinesIndex]||"";const code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){nextLine=remainingLines[remainingLinesIndex]||"";node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping}),this);if(remainingLinesIndex<remainingLines.length){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.splice(remainingLinesIndex).join(""))}aSourceMapConsumer.sources.forEach((function(sourceFile){const content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}}));return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{const source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}}add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach((function(chunk){this.add(chunk)}),this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this}prepend(aChunk){if(Array.isArray(aChunk)){for(let i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this}walk(aFn){let chunk;for(let i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}join(aSep){let newChildren;let i;const len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this}replaceRight(aPattern,aReplacement){const lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this}setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent}walkSourceContents(aFn){for(let i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}const sources=Object.keys(this.sourceContents);for(let i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}}toString(){let str="";this.walk((function(chunk){str+=chunk}));return str}toStringWithSourceMap(aArgs){const generated={code:"",line:1,column:0};const map=new SourceMapGenerator(aArgs);let sourceMappingActive=false;let lastOriginalSource=null;let lastOriginalLine=null;let lastOriginalColumn=null;let lastOriginalName=null;this.walk((function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(let idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}}));this.walkSourceContents((function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)}));return{code:generated.code,map:map}}}exports.SourceNode=SourceNode},{"./source-map-generator":17,"./util":19}],19:[function(require,module,exports){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}throw new Error('"'+aName+'" is a required argument.')}exports.getArg=getArg;const urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/;const dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){const match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){let url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;const MAX_CACHED_INPUTS=32;function lruMemoize(f){const cache=[];return function(input){for(let i=0;i<cache.length;i++){if(cache[i].input===input){const temp=cache[0];cache[0]=cache[i];cache[i]=temp;return cache[0].result}}const result=f(input);cache.unshift({input:input,result:result});if(cache.length>MAX_CACHED_INPUTS){cache.pop()}return result}}const normalize=lruMemoize((function normalize(aPath){let path=aPath;const url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}const isAbsolute=exports.isAbsolute(path);const parts=[];let start=0;let i=0;while(true){start=i;i=path.indexOf("/",start);if(i===-1){parts.push(path.slice(start));break}else{parts.push(path.slice(start,i));while(i<path.length&&path[i]==="/"){i++}}}let up=0;for(i=parts.length-1;i>=0;i--){const part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}));exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}const aPathUrl=urlParse(aPath);const aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}const joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;exports.isAbsolute=function(aPath){return aPath.charAt(0)==="/"||urlRegexp.test(aPath)};function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");let level=0;while(aPath.indexOf(aRoot+"/")!==0){const index=aRoot.lastIndexOf("/");if(index<0){return aPath}aRoot=aRoot.slice(0,index);if(aRoot.match(/^([^\/]+:\/)?\/*$/)){return aPath}++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)}exports.relative=relative;const supportsNullProto=function(){const obj=Object.create(null);return!("__proto__"in obj)}();function identity(s){return s}function toSetString(aStr){if(isProtoString(aStr)){return"$"+aStr}return aStr}exports.toSetString=supportsNullProto?identity:toSetString;function fromSetString(aStr){if(isProtoString(aStr)){return aStr.slice(1)}return aStr}exports.fromSetString=supportsNullProto?identity:fromSetString;function isProtoString(s){if(!s){return false}const length=s.length;if(length<9){return false}if(s.charCodeAt(length-1)!==95||s.charCodeAt(length-2)!==95||s.charCodeAt(length-3)!==111||s.charCodeAt(length-4)!==116||s.charCodeAt(length-5)!==111||s.charCodeAt(length-6)!==114||s.charCodeAt(length-7)!==112||s.charCodeAt(length-8)!==95||s.charCodeAt(length-9)!==95){return false}for(let i=length-10;i>=0;i--){if(s.charCodeAt(i)!==36){return false}}return true}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){let cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0||onlyCompareOriginal){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositionsDeflated(mappingA,mappingB,onlyCompareGenerated){let cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0||onlyCompareGenerated){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositionsDeflated=compareByGeneratedPositionsDeflated;function strcmp(aStr1,aStr2){if(aStr1===aStr2){return 0}if(aStr1===null){return 1}if(aStr2===null){return-1}if(aStr1>aStr2){return 1}return-1}function compareByGeneratedPositionsInflated(mappingA,mappingB){let cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated;function parseSourceMapInput(str){return JSON.parse(str.replace(/^\)]}'[^\n]*\n/,""))}exports.parseSourceMapInput=parseSourceMapInput;function computeSourceURL(sourceRoot,sourceURL,sourceMapURL){sourceURL=sourceURL||"";if(sourceRoot){if(sourceRoot[sourceRoot.length-1]!=="/"&&sourceURL[0]!=="/"){sourceRoot+="/"}sourceURL=sourceRoot+sourceURL}if(sourceMapURL){const parsed=urlParse(sourceMapURL);if(!parsed){throw new Error("sourceMapURL could not be parsed")}if(parsed.path){const index=parsed.path.lastIndexOf("/");if(index>=0){parsed.path=parsed.path.substring(0,index+1)}}sourceURL=join(urlGenerate(parsed),sourceURL)}return normalize(sourceURL)}exports.computeSourceURL=computeSourceURL},{}],20:[function(require,module,exports){const readWasm=require("../lib/read-wasm");function Mapping(){this.generatedLine=0;this.generatedColumn=0;this.lastGeneratedColumn=null;this.source=null;this.originalLine=null;this.originalColumn=null;this.name=null}let cachedWasm=null;module.exports=function wasm(){if(cachedWasm){return cachedWasm}const callbackStack=[];cachedWasm=readWasm().then(buffer=>WebAssembly.instantiate(buffer,{env:{mapping_callback(generatedLine,generatedColumn,hasLastGeneratedColumn,lastGeneratedColumn,hasOriginal,source,originalLine,originalColumn,hasName,name){const mapping=new Mapping;mapping.generatedLine=generatedLine+1;mapping.generatedColumn=generatedColumn;if(hasLastGeneratedColumn){mapping.lastGeneratedColumn=lastGeneratedColumn-1}if(hasOriginal){mapping.source=source;mapping.originalLine=originalLine+1;mapping.originalColumn=originalColumn;if(hasName){mapping.name=name}}callbackStack[callbackStack.length-1](mapping)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(Wasm=>({exports:Wasm.instance.exports,withMappingCallback:(mappingCallback,f)=>{callbackStack.push(mappingCallback);try{f()}finally{callbackStack.pop()}}})).then(null,e=>{cachedWasm=null;throw e});return cachedWasm}},{"../lib/read-wasm":15}],21:[function(require,module,exports){exports.SourceMapGenerator=require("./lib/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./lib/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./lib/source-node").SourceNode},{"./lib/source-map-consumer":16,"./lib/source-map-generator":17,"./lib/source-node":18}]},{},[8]);