<h2>Import and Export</h2>
<hr>
<p>The following rules apply to import and export operators:</p>
<ul>
<li>
<p>Can only be used at the 'top-level' â€” not inside parentheses, indented blocks or bracket functions.</p>
</li>
<li>
<p>The first operand of import operators is the module path/url which must be a string literal. All other operands of import and export operators must be <a href="?Syntax#identifiers">identifiers</a>.</p>
</li>
<li>
<p>Return <code>undefined</code>.</p>
</li>
</ul>
<p>While not necessary, we typically use import and export operators at the start of a file:</p>
<pre><code><span class="zap-keyword">import</span> <span class="zap-string">'/modules/a.js'</span> <span class="zap-identifier">f1</span> <span class="zap-identifier">f2</span>
<span class="zap-keyword">import</span> <span class="zap-string">'/modules/b.js'</span> <span class="zap-identifier">g</span>
<span class="zap-keyword">export</span> <span class="zap-identifier">h1</span> <span class="zap-identifier">h2</span>

<span class="zap-identifier">h1</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">\</span><span class="zap-identifier">f1</span> <span class="zap-operator">\</span><span class="zap-identifier">g</span><span class="zap-punctuation">]</span>
<span class="zap-identifier">h2</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">\</span><span class="zap-identifier">f2</span> <span class="zap-operator">\</span><span class="zap-identifier">g</span><span class="zap-punctuation">]</span>
</code></pre>
<blockquote>
<p>Do not assign to imports. Assignment operators that create <a href="?Assignment#local-variables">local variables</a> will create a new variable that masks the import. Assignment operators that update variables (e.g. <a href="?Assignment#update-assignment"><code>+=</code></a>) will throw an error since imports are constants.</p>
</blockquote>
<hr>
<h4 id="export"><code>export</code></h4>
<p>Export variables:</p>
<pre><code><span class="zap-keyword">export</span> <span class="zap-identifier">add</span> <span class="zap-identifier">subtract</span>

<span class="zap-identifier">add</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">+</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
<span class="zap-identifier">subtract</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">-</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
</code></pre>
<p><code>export</code> can only be used once per file.</p>
<hr>
<h4 id="import"><code>import</code></h4>
<p>Use <code>import</code> with one operand to import a module for side effects only:</p>
<pre><code><span class="zap-keyword">import</span> <span class="zap-string">'/modules/do-something.js'</span>
</code></pre>
<p>Use additional operands for named imports:</p>
<pre><code><span class="zap-keyword">import</span> <span class="zap-string">'/modules/arithmetic.js'</span> <span class="zap-identifier">add</span> <span class="zap-identifier">subtract</span>
<span class="zap-comment">// use add and subtract here</span>
</code></pre>
<hr>
<h4 id="import-as"><code>importAs</code></h4>
<p>Rename imports. Operands are passed as <em>importName</em> <em>newName</em> pairs:</p>
<pre><code><span class="zap-keyword">importAs</span> <span class="zap-string">'/modules/arithmetic.js'</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">add</span> <span class="zap-identifier">plus</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">subtract</span> <span class="zap-identifier">takeaway</span>
<span class="zap-comment">// use plus and takeaway here</span>
</code></pre>
<hr>
<h4 id="import-all"><code>importAll</code></h4>
<p>Import all of a module's exports as an object:</p>
<pre><code><span class="zap-keyword">importAll</span> <span class="zap-string">'/modules/arithmetic.js'</span> <span class="zap-identifier">arith</span>
<span class="zap-comment">// use  arith :add  and  arith :subtract  here</span>
</code></pre>
<hr>
<h4 id="import-default"><code>importDefault</code></h4>
<p>Import default export.</p>
<p>Zap does not use default exports, but many JavaScript modules do:</p>
<pre><code><span class="zap-keyword">importDefault</span> <span class="zap-string">'/modules/my-js-module.js'</span> <span class="zap-identifier">theDefault</span>
<span class="zap-comment">// use theDefault here</span>
</code></pre>
<hr>
<h4 id="load"><code>load</code></h4>
<p>Dynamically import a module.</p>
<p><code>load</code> is not subject to the restrictions that apply to other import operators: <code>load</code> can be used anywhere and the module path/url can be any expression. <code>import</code> returns a promise that resolves to an object:</p>
<pre><code><span class="zap-keyword">load</span> <span class="zap-string">'/modules/arithmetic.js'</span> <span class="zap-operator">~</span><span class="zap-identifier">then</span> 
    <span class="zap-keyword">fun</span> <span class="zap-identifier">arith</span>
        <span class="zap-comment">// use  arith :add  and  arith :subtract  here</span>
</code></pre>
<p>Or using <code>await</code>:</p>
<pre><code><span class="zap-keyword">asyncScope</span>
    <span class="zap-identifier">add</span> <span class="zap-identifier">subtract</span> <span class="zap-operator">#=</span> <span class="zap-string">'/modules/arithmetic.js'</span> <span class="zap-keyword">load</span> <span class="zap-keyword">await</span>
    <span class="zap-comment">// use add and subtract here</span>
</code></pre>
<hr>
<h4>CommonJS Modules</h4>
<p>CommonJS modules do not require dedicated operators or rules.</p>
<p>The following export examples are equivalent:</p>
<pre><code><span class="zap-identifier">module</span> <span class="zap-operator">:</span><span class="zap-identifier">exports</span> <span class="zap-operator">=</span> <span class="zap-operator">#</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">add</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">+</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">subtract</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">-</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
</code></pre>
<pre><code><span class="zap-identifier">add</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">+</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
<span class="zap-identifier">subtract</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">-</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
<span class="zap-identifier">exports</span> <span class="zap-keyword">attach</span> <span class="zap-identifier">add</span> <span class="zap-identifier">subtract</span>
</code></pre>
<pre><code><span class="zap-identifier">exports</span>
<span class="zap-punctuation">|</span> <span class="zap-keyword">chg</span> <span class="zap-string">'add'</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">+</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
<span class="zap-punctuation">|</span> <span class="zap-keyword">chg</span> <span class="zap-string">'subtract'</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">-</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>
</code></pre>
<p>Use the <code>require</code> function to load a module:</p>
<pre><code><span class="zap-identifier">arith</span> <span class="zap-operator">=</span> <span class="zap-string">'arithmetic.js'</span> <span class="zap-operator">\</span><span class="zap-identifier">require</span>
<span class="zap-comment">// use  arith :add  and  arith :subtract  here</span>
</code></pre>
<p>Or with destructuring:</p>
<pre><code><span class="zap-identifier">add</span> <span class="zap-identifier">subtract</span> <span class="zap-operator">#=</span> <span class="zap-string">'arithmetic.js'</span> <span class="zap-operator">\</span><span class="zap-identifier">require</span>
<span class="zap-comment">// use add and subtract here</span>
</code></pre>
<br><br><br>