<h2>Classes</h2>
<hr>
<h4 id="class"><code>class</code></h4>
<p>Create a class.</p>
<p>We can use a regular function as a constructor:</p>
<pre><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">fun</span> <span class="zap-identifier">name</span> <span class="zap-identifier">age</span>
    <span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">name</span> <span class="zap-operator">=</span> <span class="zap-identifier">name</span>
    <span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">age</span> <span class="zap-operator">=</span> <span class="zap-identifier">age</span>

<span class="zap-identifier">alex</span> <span class="zap-operator">=</span> <span class="zap-keyword">new</span> <span class="zap-identifier">Animal</span> <span class="zap-string">'Alex'</span> <span class="zap-number">8</span>   <span class="zap-comment">// Animal {name: "Alex", age: 8}</span>
</code></pre>
<p>The <code>class</code> operator is used like <a href="?Writing-Functions#fun"><code>fun</code></a>, but returns a class rather than a function. Furthermore, when <code>class</code> is used:</p>
<ul>
<li>If the constructor's <a href="?Syntax#body-operands">body</a> is empty, the parameters are automatically added to <code>this</code>:</li>
</ul>
<pre class="indent"><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">class</span> <span class="zap-identifier">name</span> <span class="zap-identifier">age</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>

<span class="zap-comment">// is equivalent to:</span>

<span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">class</span> <span class="zap-identifier">name</span> <span class="zap-identifier">age</span>
    <span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">name</span> <span class="zap-operator">=</span> <span class="zap-identifier">name</span>
    <span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">age</span> <span class="zap-operator">=</span> <span class="zap-identifier">age</span>
</code></pre>
<ul>
<li>The constructor always returns the new instance:</li>
</ul>
<pre class="indent"><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">fun</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">5</span><span class="zap-punctuation">)</span>     <span class="zap-comment">// function</span>
<span class="zap-keyword">new</span> <span class="zap-identifier">Animal</span>               <span class="zap-comment">// {u: 5}</span>

<span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">class</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">5</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// class</span>
<span class="zap-keyword">new</span> <span class="zap-identifier">Animal</span>               <span class="zap-comment">// Animal {}</span>
</code></pre>
<ul>
<li>Calling the constructor throws an error:</li>
</ul>
<pre class="indent"><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">class</span> <span class="zap-identifier">name</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>

<span class="zap-keyword">new</span> <span class="zap-identifier">Animal</span> <span class="zap-string">'Alex'</span>   <span class="zap-comment">// Animal {name: "Alex"}</span>

<span class="zap-operator">\</span><span class="zap-identifier">Animal</span> <span class="zap-string">'Alex'</span>      <span class="zap-comment">// TypeError: Class constructor Animal cannot</span>
                    <span class="zap-comment">// be invoked without 'new'</span>
</code></pre>
<p>Use <a href="?Get-Property#colon-proto-getter"><code>::</code></a> to add a function to an object's prototype — i.e. to add a method to a class:</p>
<pre><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">class</span> <span class="zap-identifier">name</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>

<span class="zap-identifier">Animal</span> <span class="zap-operator">::</span><span class="zap-identifier">speak</span> <span class="zap-operator">=</span> <span class="zap-keyword">fun</span>
    <span class="zap-operator">+</span> <span class="zap-punctuation">(</span><span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">name</span><span class="zap-punctuation">)</span><span class="zap-string">' makes a noise'</span>

<span class="zap-identifier">alex</span> <span class="zap-operator">=</span> <span class="zap-keyword">new</span> <span class="zap-identifier">Animal</span> <span class="zap-string">'Alex'</span>
<span class="zap-identifier">alex</span> <span class="zap-operator">~</span><span class="zap-identifier">speak</span>   <span class="zap-comment">// 'Alex makes a noise'</span>
</code></pre>
<hr>
<h4 id="extends"><code>extends</code></h4>
<p>Create a subclass.</p>
<p><code>extends</code> is like <a href="#class"><code>class</code></a> except that:</p>
<ul>
<li>
<p>The first operand of <code>extends</code> is the parent class.</p>
</li>
<li>
<p>If the constructor <a href="?Syntax#body-operands">body</a> is empty, the subclass is given a default constructor that passes its arguments to the parent constructor.</p>
</li>
</ul>
<pre><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">class</span> <span class="zap-identifier">name</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>

<span class="zap-identifier">Cat</span> <span class="zap-operator">=</span> <span class="zap-keyword">extends</span> <span class="zap-identifier">Animal</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// default constructor</span>
<span class="zap-identifier">Cat</span> <span class="zap-operator">::</span><span class="zap-identifier">speak</span> <span class="zap-operator">=</span> <span class="zap-keyword">fun</span>
    <span class="zap-operator">+</span> <span class="zap-punctuation">(</span><span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">name</span><span class="zap-punctuation">)</span><span class="zap-string">' meows'</span>

<span class="zap-identifier">Dog</span> <span class="zap-operator">=</span> <span class="zap-keyword">extends</span> <span class="zap-identifier">Animal</span> <span class="zap-identifier">name</span> <span class="zap-identifier">breed</span>
    <span class="zap-operator">\</span><span class="zap-variable">super</span> <span class="zap-identifier">name</span>   <span class="zap-comment">// see below</span>
    <span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">breed</span> <span class="zap-operator">=</span> <span class="zap-identifier">breed</span>
<span class="zap-identifier">Dog</span> <span class="zap-operator">::</span><span class="zap-identifier">speak</span> <span class="zap-operator">=</span> <span class="zap-keyword">fun</span>
    <span class="zap-operator">+</span> <span class="zap-punctuation">(</span><span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">name</span><span class="zap-punctuation">)</span><span class="zap-string">' the '</span><span class="zap-punctuation">(</span><span class="zap-variable">this</span> <span class="zap-operator">:</span><span class="zap-identifier">breed</span><span class="zap-punctuation">)</span><span class="zap-string">' barks'</span>

<span class="zap-identifier">colin</span> <span class="zap-operator">=</span> <span class="zap-keyword">new</span> <span class="zap-identifier">Cat</span> <span class="zap-string">'Colin'</span>
<span class="zap-identifier">colin</span> <span class="zap-operator">~</span><span class="zap-identifier">speak</span>   <span class="zap-comment">// 'Colin meows'</span>

<span class="zap-identifier">debra</span> <span class="zap-operator">=</span> <span class="zap-keyword">new</span> <span class="zap-identifier">Dog</span> <span class="zap-string">'Debra'</span> <span class="zap-string">'doberman'</span>
<span class="zap-identifier">debra</span> <span class="zap-operator">~</span><span class="zap-identifier">speak</span>   <span class="zap-comment">// 'Debra the doberman barks'  </span>
</code></pre>
<p>In the <code>Dog</code> constructor above, we call <code>super</code> to call the constructor of the parent class. In fact, a subclass constructor <em>must</em> call <code>super</code> — and the call must be before <code>this</code> is used.</p>
<p>When using <code>extends</code>, the parent class need not have been created with <code>class</code>; it can be a regular function or a built-in object:</p>
<pre><code><span class="zap-identifier">Animal</span> <span class="zap-operator">=</span> <span class="zap-keyword">fun</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>             <span class="zap-comment">// function</span>
<span class="zap-identifier">Dog</span> <span class="zap-operator">=</span> <span class="zap-keyword">extends</span> <span class="zap-identifier">Animal</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>     <span class="zap-comment">// class</span>
<span class="zap-keyword">new</span> <span class="zap-identifier">Dog</span>                     <span class="zap-comment">// Dog {}</span>

<span class="zap-identifier">Vector</span> <span class="zap-operator">=</span> <span class="zap-keyword">extends</span> <span class="zap-identifier">Array</span> <span class="zap-punctuation">(</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// class</span>
<span class="zap-keyword">new</span> <span class="zap-identifier">Vector</span> <span class="zap-number">3</span>                <span class="zap-comment">// Vector [empty × 3]</span>
</code></pre>
<br><br><br>