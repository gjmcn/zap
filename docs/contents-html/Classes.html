<h2>Classes</h2>
<hr>
<h4 id="class"><code>class</code></h4>
<p>We can use a regular function as a constructor:</p>
<pre><code>Animal = fun name age
    this :name = name
    this :age = age

alex = new Animal 'Alex' 8   // Animal {name: &quot;Alex&quot;, age: 8}
</code></pre>
<p>The <code>class</code> operator is used just like <a href="?Writing-Functions#fun"><code>fun</code></a>, but creates an actual class. Furthermore, when <code>class</code> is used:</p>
<ul>
<li>
<p>If the constructor's <a href="?Syntax#body-rules">body</a> is empty, the arguments are automatically added to <code>this</code>:</p>
<pre><code>Animal = class name age ()

// is equivalent to:

Animal = class name age
    this :name = name
    this :age = age
</code></pre>
</li>
<li>
<p>The constructor always returns the new instance:</p>
<pre><code>Animal = fun (# u 5)     // function
new Animal               // {u: 5}

Animal = class (# u 5)   // class
new Animal               // Animal {}
</code></pre>
</li>
<li>
<p>Calling the constructor throws an error:</p>
<pre><code>Animal = class name ()
\Animal 'Alex'   // TypeError: Class constructor Animal cannot
                 // be invoked without 'new'
</code></pre>
</li>
</ul>
<p>Use  <a href="?Get-Property#colon-proto-getter"><code>::</code></a> to add functions to an objects prototype — i.e. to add methods to a class:</p>
<pre><code>Animal = class name ()

Animal ::speak = fun
    + (this :name)' makes a noise'

alex = new Animal 'Alex'
alex ~speak   // 'Alex makes a noise'
</code></pre>
<hr>
<h4 id="extends"><code>extends</code></h4>
<p>Create a subclass. <code>extends</code> is like <code>class</code> except that:</p>
<ul>
<li>
<p>The first operand of <code>extends</code> is the parent class.</p>
</li>
<li>
<p>If the constructor <a href="?Syntax#body-rules">body</a> is empty, the subclass is given a default constructor that passes its arguments to the parent constructor.</p>
</li>
</ul>
<pre><code>Animal = class name ()

Cat = extends Animal ()   // default constructor
Cat ::speak = fun
    + (this :name)' meows'

Dog = extends Animal name breed
    \super name   // see below
    this :breed = breed
Dog ::speak = fun
    + (this :name)' the '(this :breed)' barks'

colin = new Cat 'Colin'
colin ~speak   // 'Colin meows'

debra = new Dog 'Debra' 'doberman'
debra ~speak   // 'Debra the doberman speaks'  
</code></pre>
<p>In the <code>Dog</code> constructor above, we call <code>super</code> to call the constructor of the parent class. In general, <code>super</code> must be called in the constructor of a subclass — and the call must be before <code>this</code> is used.</p>
<p>When using <code>extends</code>, the parent class need not have been created with <code>class</code>; it can be a regular function or a built-in object:</p>
<pre><code>Animal = fun ()             // function
Dog = extends Animal ()     // class
new Dog                     // Dog {}

Vector = extends Array ()   // class
new Vector 3                // Vector [empty × 3]
</code></pre>


<br><br><br>