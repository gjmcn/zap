<h2>Writing Functions</h2>
<hr>
<p>Use square brackets to create a function. By default, a function has parameters <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code>. To use custom parameter names, list them after the opening bracket followed by <code>-&gt;</code>:</p>
<pre><code>f = [a + b]          // function
g = [u v -&gt; u + v]   // function

\f 5 10   // 15 
\g 5 10   // 15

f :length      // 4 (number of parameters)
g :length      // 2
[] :length     // 4
[-&gt;] :length   // 0
</code></pre>
<blockquote>
<p>If an inner function must see the parameters of an outer function, at least one of the functions must have custom parameter names — otherwise the parameters of the outer function will be 'shadowed'.</p>
</blockquote>
<h4>Rest Syntax</h4>
<p>Rest syntax can be used with the final parameter:</p>
<pre><code>f = [x ...y -&gt; y]
\f 5 6 7   // [6, 7]
</code></pre>
<h4>Defaults</h4>
<p>Use <a href="?Assignment#conditional-assignment"><code>?=</code></a> to set a default parameter value. The default is used if <code>undefined</code> or <code>null</code> is passed, or if no value is passed:</p>
<pre><code>f = [
  a ?= 5
  a + 10]

\f   // 15  
</code></pre>
<h4 id="options">Options</h4>
<p>A parameter called <code>ops</code> ('options') automatically defaults to an empty object. The assignment operator <code>=:</code> is specifially for working with <code>ops</code> objects. <code>=:</code> assigns a property of <code>ops</code> to a variable of the same name; the given default value is used if the property does not exist, or is <code>undefined</code> or <code>null</code>:</p>
<pre><code>area = [ops -&gt;
  width =: 5
  height =: 10
  width * height]

# width 20 height 30 \area   // 600
# height 30 \area            // 150
\area                        // 50
</code></pre>
<p><code>ops</code> can be used alongside other parameters:</p>
<pre><code>f = [x ops ...y -&gt;
  u =: 5;
  v =: 6;
  @ x u v y];

\f 10 (# u 20) 30 40;   // [10, 20, 6, [30, 40]]   
</code></pre>
<blockquote>
<p>Except for defaulting to an empty object, there is nothing special about <code>ops</code> — it can be used and modified like any other object.</p>
</blockquote>
<blockquote>
<p><code>=:</code> simply looks for the variable <code>ops</code> and gets the required property. <code>ops</code> will typically be an argument of the current function, but need not be.</p>
</blockquote>
<blockquote>
<p><code>=:</code> uses short-circuit evaluation: if the relevant property of <code>ops</code> is neither <code>null</code> nor <code>undefined</code>, the second operand of <code>=:</code> is not evaluated.</p>
</blockquote>
<h4>Asynchronous Functions</h4>
<p>Use curly brackets for an asynchronous function:</p>
<pre><code>f = {
  data = a \fetch $await |json $await;
  + 'Rows in data: '(data :length) $print};

// custom parameter name
g = {url -&gt;
  data = url \fetch $await |json $await;
  + 'Rows in data: '(data :length) $print};
</code></pre>
<h4 id="generator-functions">Generator Functions</h4>
<p>Use <code>**</code> immediately after the opening bracket for a generator function:</p>
<pre><code>f = [**
  5 $yield;   
  6 $yield];   // generator function

g = \f;        // generator
g |next;       // {value: 5, done: false}
</code></pre>
<h4>Arrow Functions</h4>
<p>Functions compile to standard JavaScript function expressions by default. Use <code>=&gt;</code> rather than <code>-&gt;</code> for a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">JavaScript arrow function</a>:</p>
<pre><code>f = [x =&gt; x + 5];   // arrow function
\f 10;   // 15
</code></pre>
<h4>Immediately Invoked Function Expressions</h4>
<p>As in JavaScript, we can use immediately invoked function expressions (IIFEs):</p>
<pre><code>// IIFE with no arguments
\[5];   // 5

// IIFE with 2 arguments
5 10 \[a + b];   // 15
5 \[a + b] 10;   // 15
\[a + b] 5 10;   // 15

// asynchronous IIFE
\{
  data = someURL \fetch $await |json $await;
  + 'Rows in data: '(data :length) $print};
</code></pre>


<br><br><br>