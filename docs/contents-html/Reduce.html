<h2>Reduce</h2>
<hr>
<p>Except for <a href="#reduce-op"><code>reduce</code></a> itself, the operators in this section take an iterable and a callback function. The callback is applied to each element of the iterable and the returned values are used to compute the result. For some operators, the callback is optional — if omitted, elements of the iterable are used to compute the result:</p>
<hr>
<h4 id="count"><code>count</code> <span class="small">(callback required)</span></h4>
<p>Counts the number of times that the callback returns a truthy value:</p>
<pre><code><span class="zap-identifier">s</span> <span class="zap-operator">=</span> <span class="zap-operator">@@</span> <span class="zap-number">1</span> <span class="zap-string">'1'</span> <span class="zap-literal">true</span> <span class="zap-number">0</span>              <span class="zap-comment">// Set {1, "1", true, 0}</span>
<span class="zap-identifier">s</span> <span class="zap-keyword">count</span> <span class="zap-punctuation">[</span><span class="zap-keyword">typeof</span> <span class="zap-identifier">a</span> <span class="zap-operator">==</span> <span class="zap-string">'number'</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// 2</span>
</code></pre>
<hr>
<h4 id="every"><code>every</code>, <code>some</code> <span class="small">(callback required)</span></h4>
<p><code>every</code> returns <code>true</code> if the callback returns a truthy value for every element and <code>false</code> otherwise. <code>some</code> returns <code>true</code> if the callback returns a truthy value for any element and <code>false</code> otherwise.</p>
<pre><code><span class="zap-identifier">m</span> <span class="zap-operator">=</span> <span class="zap-operator">##</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">apple</span> <span class="zap-string">'green'</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">banana</span> <span class="zap-string">'yellow'</span>
<span class="zap-punctuation">|</span> <span class="zap-identifier">cherry</span> <span class="zap-string">'red'</span>   <span class="zap-comment">// Map {'apple' =&gt; 'green', ...}</span>

<span class="zap-comment">// use values method of map</span>
<span class="zap-identifier">m</span> <span class="zap-operator">~</span><span class="zap-identifier">values</span> <span class="zap-keyword">every</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">==</span> <span class="zap-string">'green'</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// false </span>
<span class="zap-identifier">m</span> <span class="zap-operator">~</span><span class="zap-identifier">values</span> <span class="zap-keyword">some</span>  <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">==</span> <span class="zap-string">'green'</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// true</span>

<span class="zap-comment">// use m directly (the callback is passed an array: [key value])</span>
<span class="zap-identifier">m</span> <span class="zap-keyword">every</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">:</span><span class="zap-number">1</span> <span class="zap-operator">==</span> <span class="zap-string">'green'</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// false </span>
<span class="zap-identifier">m</span> <span class="zap-keyword">some</span>  <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">:</span><span class="zap-number">1</span> <span class="zap-operator">==</span> <span class="zap-string">'green'</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// true</span>
</code></pre>
<p>If the iterable is empty, <code>every</code> returns <code>true</code>, <code>some</code> returns <code>false</code>.</p>
<hr>
<h4 id="find"><code>find</code>, <code>findIndex</code> <span class="small">(callback required)</span></h4>
<p><code>find</code> returns the element corresponding to the first truthy result of the callback. <code>findIndex</code> is like <code>find</code>, but returns the index of the corresponding element:</p>
<pre><code><span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-operator">@</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">5</span> <span class="zap-identifier">v</span> <span class="zap-number">20</span><span class="zap-punctuation">)</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">6</span> <span class="zap-identifier">v</span> <span class="zap-number">10</span><span class="zap-punctuation">)</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">7</span> <span class="zap-identifier">v</span> <span class="zap-number">30</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// array of objects</span>

<span class="zap-identifier">x</span> <span class="zap-keyword">find</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">:</span><span class="zap-identifier">u</span> <span class="zap-operator">&gt;</span> <span class="zap-number">5</span><span class="zap-punctuation">]</span>        <span class="zap-comment">// {u: 6, v: 10}</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">findIndex</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">:</span><span class="zap-identifier">u</span> <span class="zap-operator">&gt;</span> <span class="zap-number">5</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// 1</span>
</code></pre>
<p>If the callback does not return a truthy value for any element, <code>find</code> returns <code>undefined</code>, <code>findIndex</code> returns <code>-1</code>.</p>
<hr>
<h4 id="min"><code>min</code>, <code>max</code>, <code>minIndex</code>, <code>maxIndex</code> <span class="small">(callback optional)</span></h4>
<p><code>min</code>/<code>max</code> returns the element of the iterable corresponding to the minimum/maximum:</p>
<pre><code><span class="zap-operator">@</span> <span class="zap-number">7</span> <span class="zap-number">3</span> <span class="zap-number">2</span> <span class="zap-number">5</span> <span class="zap-keyword">min</span>   <span class="zap-comment">// 2</span>

<span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-operator">@</span> <span class="zap-punctuation">(</span><span class="zap-operator">@</span> <span class="zap-number">2</span> <span class="zap-number">10</span><span class="zap-punctuation">)</span> <span class="zap-punctuation">(</span><span class="zap-operator">@</span> <span class="zap-number">7</span> <span class="zap-number">20</span><span class="zap-punctuation">)</span> <span class="zap-punctuation">(</span><span class="zap-operator">@</span> <span class="zap-number">5</span> <span class="zap-number">30</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// array of arrays</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">max</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">:</span><span class="zap-number">0</span><span class="zap-punctuation">]</span>                       <span class="zap-comment">// [7, 20]</span>
</code></pre>
<p>If multiple elements correspond to the minimum/maximum, the first such element is used.</p>
<p><code>minIndex</code> and <code>maxIndex</code> are like <code>min</code> and <code>max</code> respectively, but return the index corresponding to the minimum/maximum:</p>
<pre><code><span class="zap-operator">@</span> <span class="zap-number">3</span> <span class="zap-number">9</span> <span class="zap-number">5</span> <span class="zap-keyword">maxIndex</span>   <span class="zap-comment">// 1</span>
</code></pre>
<p>The elements of the iterable (or results of the callback if used) are treated as numbers. If any element converts to <code>NaN</code> or if the iterable is empty, <code>min</code> and <code>max</code> return <code>undefined</code>, <code>minIndex</code> and <code>maxIndex</code> return <code>-1</code>.</p>
<hr>
<h4 id="sum"><code>sum</code>, <code>mean</code>, <code>variance</code>, <code>deviation</code> <span class="small">(callback optional)</span></h4>
<p>Sum, mean, variance and standard deviation:</p>
<pre><code><span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-operator">@</span> <span class="zap-number">4</span> <span class="zap-number">6</span> <span class="zap-number">8</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">sum</span>         <span class="zap-comment">// 18</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">mean</span>        <span class="zap-comment">// 6</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">variance</span>    <span class="zap-comment">// 4</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">deviation</span>   <span class="zap-comment">// 2</span>

<span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-operator">@</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">5</span> <span class="zap-identifier">v</span> <span class="zap-number">10</span><span class="zap-punctuation">)</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">6</span> <span class="zap-identifier">v</span> <span class="zap-number">20</span><span class="zap-punctuation">)</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">7</span> <span class="zap-identifier">v</span> <span class="zap-number">30</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// array of objects</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">sum</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">:</span><span class="zap-identifier">v</span><span class="zap-punctuation">]</span>     <span class="zap-comment">// 60</span>
</code></pre>
<p>The elements of the iterable (or results of the callback if used) are treated as numbers. If any element converts to <code>NaN</code>, the reduction operator will return <code>NaN</code>.</p>
<p><code>sum</code> returns <code>0</code> if the iterable is empty, <code>mean</code> returns <code>NaN</code>. <code>variance</code> and <code>deviation</code> return <code>NaN</code> if the iterable has less than 2 elements.</p>
<p><code>variance</code> calculates the unbiased sample variance: the sum of squared differences from the mean divided by <em>n</em> - 1, where <em>n</em> is the number of elements in the iterable. <code>deviation</code> is the square root of <code>variance</code>.</p>
<hr>
<h4 id="sum-cumu"><code>sumCumu</code> <span class="small">(callback optional)</span></h4>
<p><code>sumCumu</code> is like <a href="#sum"><code>sum</code></a>, but returns an array of cumulative sums rather than just the result:</p>
<pre><code><span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-operator">@</span> <span class="zap-number">3</span> <span class="zap-number">8</span> <span class="zap-number">2</span> <span class="zap-number">10</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">sum</span>       <span class="zap-comment">// 23</span>
<span class="zap-identifier">x</span> <span class="zap-keyword">sumCumu</span>   <span class="zap-comment">// [3, 11, 13, 23]</span>
</code></pre>
<blockquote>
<p><code>sumCumu</code> is <em>not</em> a reduction operator, but is listed here due to its similarity to <code>sum</code>.</p>
</blockquote>
<hr>
<h4 id="reduce-op"><code>reduce</code></h4>
<p>The <code>reduce</code> operator takes an iterable, a 'reducer function' and an initial result. The reducer function is called once for each element of the iterable; it is passed the 'current result', the element, the index and the iterable:</p>
<pre><code><span class="zap-operator">@</span> <span class="zap-number">5</span> <span class="zap-number">6</span> <span class="zap-number">7</span> <span class="zap-keyword">reduce</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">+</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span> <span class="zap-number">0</span>   <span class="zap-comment">// 18</span>
</code></pre>
<blockquote>
<p>The initial result is required — in contrast to the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce"><code>reduce</code> array method</a> where the initial result is optional.</p>
</blockquote>

<br><br><br>