<h2>Syntax</h2>
<hr>
<p>Operators are represented by symbols or reserved words. Each line is an expression that returns a value:</p>
<pre><code><span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-number">3</span>    <span class="zap-comment">// 5</span>
<span class="zap-number">9</span> <span class="zap-keyword">sqrt</span>   <span class="zap-comment">// 3</span>
</code></pre>
<p>Use <code>|</code> to continue an expression on a new line:</p>
<pre><code><span class="zap-number">4</span> <span class="zap-operator">+</span> <span class="zap-number">5</span>
<span class="zap-punctuation">|</span> <span class="zap-keyword">sqrt</span>   <span class="zap-comment">// 3</span>
</code></pre>
<p>In general, Zap does not use operator associativity, position or precedence rules. Code reads left to right and the 'current' operator is applied when the next operator or end of the expression is reached. The result returned by an operator is used as the first operand of the next operator:</p>
<pre><code><span class="zap-operator">+</span> <span class="zap-number">2</span> <span class="zap-number">3</span>   <span class="zap-comment">// 5</span>
<span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-number">3</span>   <span class="zap-comment">// 5</span>
<span class="zap-number">2</span> <span class="zap-number">3</span> <span class="zap-operator">+</span>   <span class="zap-comment">// 5</span>

<span class="zap-operator">+</span> <span class="zap-number">2</span> <span class="zap-number">3</span> <span class="zap-operator">*</span> <span class="zap-number">4</span>   <span class="zap-comment">// 20</span>
<span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-number">3</span> <span class="zap-operator">*</span> <span class="zap-number">4</span>   <span class="zap-comment">// 20</span>
<span class="zap-number">2</span> <span class="zap-number">3</span> <span class="zap-operator">+</span> <span class="zap-operator">*</span> <span class="zap-number">4</span>   <span class="zap-comment">// 20</span>
</code></pre>
<blockquote>
<p>If adjacent operators are represented by symbols, they must be separated by whitespace.</p>
</blockquote>
<hr>
<h4 id="parenth-and-indent">Parentheses and Indentation</h4>
<p>Parentheses can be used for precedence:</p>
<pre><code><span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-number">3</span> <span class="zap-operator">*</span> <span class="zap-number">4</span>     <span class="zap-comment">// 20</span>
<span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-punctuation">(</span><span class="zap-number">3</span> <span class="zap-operator">*</span> <span class="zap-number">4</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// 14</span>
</code></pre>
<p>Parentheses <em>cannot</em> span multiple expressions:</p>
<pre><code><span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-punctuation">(</span><span class="zap-number">3</span> <span class="zap-operator">*</span>
<span class="zap-punctuation">|</span> <span class="zap-number">4</span><span class="zap-punctuation">)</span>      <span class="zap-comment">// 14 (this is a single expression)</span>

<span class="zap-punctuation">(</span><span class="zap-number">2</span> <span class="zap-operator">+</span> <span class="zap-number">3</span>
<span class="zap-number">9</span> <span class="zap-keyword">sqrt</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// syntax error   </span>
</code></pre>
<p>Indentation can also be used for precedence. Indented blocks <em>can</em> contain multiple expressions:</p>
<pre><code><span class="zap-number">2</span> <span class="zap-operator">+</span> 
    <span class="zap-number">3</span> <span class="zap-operator">*</span> <span class="zap-number">4</span>   <span class="zap-comment">// 14</span>

<span class="zap-number">2</span> <span class="zap-operator">+</span> 
    <span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-number">3</span>
    <span class="zap-identifier">x</span> <span class="zap-operator">*</span> <span class="zap-number">4</span>   <span class="zap-comment">// 14    </span>
</code></pre>
<p>Opening an indented block automatically continues an expression — do not use a <code>|</code>.</p>
<p>We can close an indented block (or more than one) and continue the expression with <code>|</code>. The following example uses the <a href="?Literals#arrays">array literal</a> operator <code>@</code>and the <a href="?Literals#objects-and-maps">object literal</a> operator <code>#</code> to create an array of objects:</p>
<pre><code><span class="zap-comment">// an array of objects</span>
<span class="zap-operator">@</span>
    <span class="zap-operator">#</span>
    <span class="zap-punctuation">|</span> <span class="zap-identifier">name</span> <span class="zap-string">'Alex'</span>
    <span class="zap-punctuation">|</span> <span class="zap-identifier">best</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">score</span> <span class="zap-number">143</span> <span class="zap-identifier">level</span> <span class="zap-number">2</span><span class="zap-punctuation">)</span>
<span class="zap-punctuation">|</span> 
    <span class="zap-operator">#</span>
    <span class="zap-punctuation">|</span> <span class="zap-identifier">name</span> <span class="zap-string">'Cody'</span>
    <span class="zap-punctuation">|</span> <span class="zap-identifier">best</span> <span class="zap-punctuation">(</span><span class="zap-operator">#</span> <span class="zap-identifier">score</span> <span class="zap-number">201</span> <span class="zap-identifier">level</span> <span class="zap-number">3</span><span class="zap-punctuation">)</span>
</code></pre>
<p>Four spaces must be used for indentation. Use 'soft tabs' in code editors so that tabs are converted to spaces.</p>
<hr>
<h4 id="identifiers">Identifiers</h4>
<p>The term <em>identifier</em> is used frequently in these docs. An identifier is any combination of letters (currently only <code>a</code>-<code>z</code>, <code>A</code>-<code>Z</code>), digits (<code>0</code>-<code>9</code>), <code>_</code> and <code>$</code>, but cannot start with a digit.</p>
<hr>
<h4>Special Cases</h4>
<p>Additional rules apply to some operators:</p>
<h6 id="right-operand-rule">The Right Operand Rule</h6>
<p>The main <a href="?Get-Property">get property</a> and <a href="?Calling-Functions">call function/method</a> operators use the <em>right operand rule</em>: the first right operand is the property or function. We typically omit space to the right of operators that use this rule.</p>
<pre><code><span class="zap-identifier">f</span> <span class="zap-operator">=</span> <span class="zap-punctuation">[</span><span class="zap-identifier">a</span> <span class="zap-operator">+</span> <span class="zap-identifier">b</span><span class="zap-punctuation">]</span>   <span class="zap-comment">// function (adds its arguments)</span>
<span class="zap-operator">\</span><span class="zap-identifier">f</span> <span class="zap-number">5</span> <span class="zap-number">10</span>       <span class="zap-comment">// 15 (\ calls a function)</span>
<span class="zap-number">5</span> <span class="zap-operator">\</span><span class="zap-identifier">f</span> <span class="zap-number">10</span>       <span class="zap-comment">// 15</span>
<span class="zap-number">5</span> <span class="zap-number">10</span> <span class="zap-operator">\</span><span class="zap-identifier">f</span>       <span class="zap-comment">// 15</span>
<span class="zap-number">5</span> <span class="zap-number">10</span> <span class="zap-identifier">f</span> <span class="zap-operator">\</span>      <span class="zap-comment">// syntax error</span>
</code></pre>
<h5 id="identifier-name-rule">The Identifier-Name Rule</h5>
<p>The main <a href="?Get-Property">get property</a> and <a href="?Calling-Functions#calling-methods">call method</a> operators, as well as <a href="?Literals#objects-and-maps">object and map literals</a> use the <em>identifier-name rule</em>: property names that are <a href="#identifiers">identifiers</a> are treated as strings:</p>
<pre><code><span class="zap-operator">#</span> <span class="zap-string">'u'</span> <span class="zap-number">5</span> <span class="zap-string">'v'</span> <span class="zap-number">6</span>   <span class="zap-comment">// {u: 5, v: 6}</span>
<span class="zap-operator">#</span> <span class="zap-identifier">u</span> <span class="zap-number">5</span> <span class="zap-identifier">v</span> <span class="zap-number">6</span>       <span class="zap-comment">// {u: 5, v: 6}</span>
</code></pre>
<p>Use an identifier as part of a larger expression (wrapping in parentheses suffices) to avoid this special behavior:</p>
<pre><code><span class="zap-identifier">u</span> <span class="zap-operator">=</span> <span class="zap-string">'v'</span>

<span class="zap-operator">#</span> 
<span class="zap-punctuation">|</span> <span class="zap-identifier">u</span> <span class="zap-number">5</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-identifier">u</span><span class="zap-punctuation">)</span> <span class="zap-number">6</span>
<span class="zap-punctuation">|</span> <span class="zap-punctuation">(</span><span class="zap-identifier">u</span> <span class="zap-operator">+</span> <span class="zap-string">'w'</span><span class="zap-punctuation">)</span> <span class="zap-number">7</span>   <span class="zap-comment">// {u: 5, v: 6, vw: 7}</span>
</code></pre>
<p>Reserved words must be quoted when the identifier-name rule applies:</p>
<pre><code><span class="zap-operator">#</span> <span class="zap-string">'if'</span> <span class="zap-number">5</span>   <span class="zap-comment">// {if: 5}</span>
</code></pre>
<h5 id="assignment-precedence">Assignment</h5>
<p><a href="?Assignment">Assignment</a> operators have low precedence and must be placed between their two operands:</p>
<pre><code><span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-number">1</span> <span class="zap-operator">+</span> <span class="zap-number">2</span>     <span class="zap-comment">// 3</span>
<span class="zap-identifier">x</span> <span class="zap-operator">+=</span> <span class="zap-number">3</span> <span class="zap-operator">+</span> <span class="zap-number">4</span>    <span class="zap-comment">// 10</span>
<span class="zap-number">5</span> <span class="zap-operator">+</span> <span class="zap-punctuation">(</span><span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-number">6</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// 11 (x is 6)</span>
<span class="zap-identifier">y</span> <span class="zap-operator">=</span> <span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-number">8</span>     <span class="zap-comment">// syntax error, multiple assignments are not allowed </span>
</code></pre>
<p><a href="?Assignment#destructure-object">Destructuring assignment operators</a> must be placed after the last variable being assigned to:</p>
<pre><code><span class="zap-identifier">x</span> <span class="zap-operator">=</span> <span class="zap-operator">@</span> <span class="zap-number">5</span> <span class="zap-number">6</span>
<span class="zap-identifier">u</span> <span class="zap-identifier">v</span> <span class="zap-operator">@=</span> <span class="zap-identifier">x</span>   <span class="zap-comment">// [5, 6] (u is 5, v is 6)</span>
</code></pre>
<h5 id="body-operands">Body Operands</h5>
<p>The following operators take a <strong>body</strong> operand:</p>
<p><a href="?Writing-Functions#fun"><code>fun</code></a> <a href="?Writing-Functions#proc"><code>proc</code></a> <a href="?Writing-Functions#scope-op"><code>scope</code></a> <a href="?Writing-Functions#as"><code>as</code></a> <a href="?Classes#class"><code>class</code></a> <a href="?Classes#extends"><code>extends</code></a> <a href="?Loops#each"><code>each</code></a> <a href="?Loops#map"><code>map</code></a> <a href="?Loops#do"><code>do</code></a> <a href="?Exceptions#try"><code>try</code></a> <a href="?Exceptions#catch"><code>catch</code></a></p>
<p><a href="?Writing-Functions#fun"><code>asyncFun</code></a> <a href="?Writing-Functions#proc"><code>asyncProc</code></a> <a href="?Writing-Functions#scope-op"><code>asyncScope</code></a> <a href="?Writing-Functions#as"><code>asyncAs</code></a> <a href="?Loops#async-loops"><code>asyncEach</code></a> <a href="?Loops#async-loops"><code>asyncMap</code></a> <a href="?Loops#async-loops"><code>asyncDo</code></a> <a href="?Exceptions#try"><code>asyncTry</code></a> <a href="?Exceptions#catch"><code>asyncCatch</code></a></p>
<p>The body is always the final operand and must be in parentheses or be an indented block. Also, the body cannot be before the operator:</p>
<pre><code><span class="zap-keyword">fun</span> <span class="zap-identifier">x</span> <span class="zap-identifier">y</span>
    <span class="zap-identifier">x</span> <span class="zap-operator">+</span> <span class="zap-identifier">y</span>         <span class="zap-comment">// function</span>

<span class="zap-keyword">fun</span> <span class="zap-identifier">x</span> <span class="zap-identifier">y</span> <span class="zap-punctuation">(</span><span class="zap-identifier">x</span> <span class="zap-operator">+</span> <span class="zap-identifier">y</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// function</span>

<span class="zap-identifier">x</span> <span class="zap-identifier">y</span> <span class="zap-keyword">fun</span> <span class="zap-punctuation">(</span><span class="zap-identifier">x</span> <span class="zap-operator">+</span> <span class="zap-identifier">y</span><span class="zap-punctuation">)</span>   <span class="zap-comment">// function</span>

<span class="zap-identifier">x</span> <span class="zap-identifier">y</span> <span class="zap-punctuation">(</span><span class="zap-identifier">x</span> <span class="zap-operator">+</span> <span class="zap-identifier">y</span><span class="zap-punctuation">)</span> <span class="zap-keyword">fun</span>   <span class="zap-comment">// syntax error, missing body</span>
</code></pre>
<p>Body operands are important for the following reasons:</p>
<ul>
<li>
<p>They dictate the visibility of variables — see <a href="?Assignment#local-variables">Local Variables</a>.</p>
</li>
<li>
<p><code>await</code> can only be used in the body of one of the asynchronous operators listed above.</p>
</li>
<li>
<p><code>yield</code> and <code>yieldFrom</code> can only be used in the body of <code>fun</code>, <code>scope</code>, <code>as</code>, <code>each</code> and <code>do</code> (and their asynchronous counterparts).</p>
</li>
<li>
<p><code>stop</code> (exit a loop) can only be used in the body of <code>each</code>, <code>map</code> and <code>do</code> loops (and their asynchronous counterparts).</p>
</li>
</ul>

<br><br><br>